<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mach Five Marketing - Client Portal</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    
    <!-- Chart Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <style>
        /* CSS Variables */
        :root {
            /* Mach Five Marketing Brand Colors */
            --m5-primary: #34495E;        /* Mach Five Blue */
            --m5-primary-dark: #2C3E50;   /* Dark Blue */
            --m5-primary-light: #546E7A;  /* Light Blue */
            --m5-secondary: #5850EC;      /* Purple */
            --m5-accent: #DD4124;         /* Orange for CTAs */
            
            /* Status Colors */
            --m5-success: #10B981;
            --m5-warning: #F59E0B;
            --m5-danger: #EF4444;
            --m5-info: #3B82F6;
            
            /* Neutral Colors */
            --m5-gray-50: #F8F9FA;
            --m5-gray-100: #F1F3F5;
            --m5-gray-200: #E9ECEF;
            --m5-gray-300: #DEE2E6;
            --m5-gray-400: #CED4DA;
            --m5-gray-500: #ADB5BD;
            --m5-gray-600: #6C757D;
            --m5-gray-700: #495057;
            --m5-gray-800: #343A40;
            --m5-gray-900: #212529;
            
            /* Additional Colors */
            --primary-light: rgba(52, 73, 94, 0.1);
            --success: #10B981;
            
            /* Gradient Definitions */
            --gradient-primary: linear-gradient(135deg, var(--m5-primary) 0%, var(--m5-primary-dark) 100%);
            --gradient-accent: linear-gradient(135deg, var(--m5-accent) 0%, #C33A1F 100%);
            --gradient-card: linear-gradient(145deg, white 0%, #FAFBFC 100%);
            --gradient-hover: linear-gradient(135deg, rgba(52, 73, 94, 0.05) 0%, rgba(52, 73, 94, 0.02) 100%);
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            --space-3xl: 64px;
            
            /* Typography */
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 2rem;
            --font-size-4xl: 2.5rem;
            
            /* Borders & Shadows */
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --border-radius-xl: 16px;
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --shadow-sm: 0 2px 4px rgba(52, 73, 94, 0.08);
            --shadow-md: 0 4px 12px rgba(52, 73, 94, 0.12);
            --shadow-lg: 0 10px 25px rgba(52, 73, 94, 0.15);
            --shadow-xl: 0 20px 40px rgba(52, 73, 94, 0.2);
            --shadow-glow: 0 0 20px rgba(221, 65, 36, 0.3);
            --shadow-card: 0 2px 8px rgba(52, 73, 94, 0.08);
            
            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-spring: 500ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
            
            /* Z-index */
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal-backdrop: 1040;
            --z-modal: 1050;
            --z-tooltip: 1070;
        }
        
        /* Theme Variables */
        body {
            --bg-primary: white;
            --bg-secondary: #F8FAFC;
            --bg-hover: var(--m5-gray-100);
            --text-primary: var(--m5-gray-900);
            --text-secondary: var(--m5-gray-700);
            --text-muted: var(--m5-gray-600);
            --border-color: var(--m5-gray-200);
            --primary: var(--m5-primary);
        }
        
        /* Modern Effects */
        .glassmorphism {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .glassmorphism-dark {
            background: rgba(52, 73, 94, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Reset & Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            font-family: var(--font-primary);
            font-size: var(--font-size-base);
            line-height: 1.6;
            color: var(--m5-gray-900);
            background: #F8FAFC;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Background Pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(221, 65, 36, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(52, 73, 94, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(88, 80, 236, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        /* App Container */
        .app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        /* Navigation Bar */
        .navbar {
            position: sticky;
            top: 0;
            z-index: var(--z-sticky);
            background: var(--gradient-primary);
            border-bottom: none;
            box-shadow: 0 4px 20px rgba(52, 73, 94, 0.15);
        }
        
        .navbar-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 64px;
            padding: 0 var(--space-lg);
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .navbar-brand {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            text-decoration: none;
            color: white;
            transition: transform var(--transition-base);
        }
        
        .navbar-brand:hover {
            transform: translateX(4px);
        }
        
        .navbar-logo {
            height: 48px;
            width: auto;
            filter: brightness(0) invert(1);
            transition: transform var(--transition-spring);
        }
        
        .navbar-brand:hover .navbar-logo {
            transform: scale(1.05);
        }
        
        .navbar-nav {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            flex: 1;
            margin: 0 var(--space-xl);
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--border-radius);
            text-decoration: none;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            font-size: var(--font-size-sm);
            transition: all var(--transition-base);
            position: relative;
            cursor: pointer;
            letter-spacing: -0.01em;
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transform: translateY(-1px);
        }
        
        .nav-link.active {
            background: var(--m5-accent);
            color: white;
            box-shadow: 0 2px 8px rgba(221, 65, 36, 0.3);
        }
        
        .nav-link .material-symbols-outlined {
            font-size: 20px;
        }
        
        .nav-link.active .material-symbols-outlined {
            font-variation-settings: 'FILL' 1;
        }
        
        .navbar-actions {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        
        .user-dropdown {
            position: relative;
        }
        
        .user-dropdown-toggle {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--border-radius);
            background: rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all var(--transition-base);
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-family: var(--font-primary);
            font-size: var(--font-size-base);
            color: white;
        }
        
        .user-dropdown-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-1px);
        }
        
        .user-dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: var(--space-sm);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: var(--border-radius-lg);
            box-shadow: 0 10px 30px rgba(52, 73, 94, 0.2);
            min-width: 200px;
            display: none;
            z-index: var(--z-dropdown);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
        }
        
        .user-dropdown-menu.show {
            display: block;
        }
        
        /* Navbar specific button styles */
        .navbar .btn-ghost {
            color: rgba(255, 255, 255, 0.8);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .navbar .btn-ghost:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            color: var(--m5-gray-700);
            text-decoration: none;
            transition: all var(--transition-base);
        }
        
        .dropdown-divider {
            height: 1px;
            background: var(--m5-gray-200);
            margin: var(--space-xs) 0;
        }
        
        .dropdown-item:hover {
            background: var(--gradient-hover);
            color: var(--m5-primary);
            transform: translateX(4px);
        }
        
        .dropdown-item .material-symbols-outlined {
            font-size: 20px;
        }
        
        .dropdown-divider {
            height: 1px;
            background: var(--m5-gray-200);
            margin: var(--space-xs) 0;
        }
        
        /* Main Layout */
        .main {
            flex: 1;
            display: flex;
        }
        
        /* Sidebar (Desktop) */
        .sidebar {
            width: 240px;
            background: white;
            border-right: 1px solid var(--m5-gray-200);
            padding: var(--space-lg);
            overflow-y: auto;
            transition: all var(--transition-slow);
            position: relative;
        }
        
        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: linear-gradient(to bottom, rgba(52, 73, 94, 0.02) 0%, transparent 100%);
            pointer-events: none;
        }
        
        .sidebar.collapsed {
            width: 72px;
        }
        
        .sidebar-section {
            margin-bottom: var(--space-xl);
        }
        
        .sidebar-title {
            font-size: var(--font-size-xs);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--m5-primary);
            margin-bottom: var(--space-sm);
            padding: 0 var(--space-sm);
            opacity: 0.8;
        }
        
        /* Sidebar Navigation Links */
        .sidebar .nav-link {
            color: var(--m5-gray-700);
            margin-bottom: var(--space-xs);
            border: 1px solid transparent;
        }
        
        .sidebar .nav-link:hover {
            background: var(--gradient-hover);
            color: var(--m5-primary);
            border-color: var(--m5-gray-200);
            transform: translateX(4px);
        }
        
        .sidebar .nav-link.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-md);
        }
        
        .sidebar.collapsed .sidebar-title {
            display: none;
        }
        
        /* Content Area */
        .content {
            flex: 1;
            padding: var(--space-xl);
            overflow-y: auto;
        }
        
        .content-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Page Components */
        .page-header {
            margin-bottom: var(--space-xl);
        }
        
        .page-title {
            font-size: var(--font-size-3xl);
            font-weight: 800;
            color: var(--m5-gray-900);
            margin-bottom: var(--space-sm);
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, var(--m5-primary) 0%, var(--m5-primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .page-subtitle {
            font-size: var(--font-size-lg);
            color: var(--m5-gray-600);
        }
        
        /* Cards */
        .card {
            background: var(--gradient-card);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-card);
            border: 1px solid var(--m5-gray-100);
            overflow: hidden;
            transition: all var(--transition-base);
            position: relative;
        }
        
        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-4px);
            border-color: var(--m5-primary-light);
        }
        
        .card-header {
            padding: var(--space-lg);
            border-bottom: 1px solid var(--m5-gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .card-title {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--m5-gray-900);
            letter-spacing: -0.01em;
        }
        
        .card-body {
            padding: var(--space-lg);
        }
        
        /* Grid System */
        .grid {
            display: grid;
            gap: var(--space-lg);
        }
        
        .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        .grid-cols-5 { grid-template-columns: repeat(5, 1fr); }
        
        /* Metric Cards */
        .metric-card {
            background: var(--gradient-card);
            border-radius: var(--border-radius-lg);
            padding: var(--space-lg);
            box-shadow: var(--shadow-card);
            border: 1px solid var(--m5-gray-100);
            transition: all var(--transition-base);
            position: relative;
            overflow: hidden;
        }
        
        .metric-card::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, var(--primary-light) 0%, transparent 70%);
            transform: scale(0);
            transition: transform var(--transition-slow);
        }
        
        .metric-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }
        
        .metric-card:hover::after {
            transform: scale(1);
        }
        
        .metric-value {
            font-size: var(--font-size-3xl);
            font-weight: 800;
            color: var(--m5-primary);
            margin-bottom: var(--space-sm);
            letter-spacing: -0.02em;
            position: relative;
            z-index: 1;
        }
        
        .metric-label {
            font-size: var(--font-size-sm);
            color: var(--m5-gray-600);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            position: relative;
            z-index: 1;
        }
        
        .metric-change {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            margin-top: var(--space-sm);
            font-size: var(--font-size-sm);
        }
        
        .metric-change.positive {
            color: var(--m5-success);
        }
        
        .metric-change.negative {
            color: var(--m5-danger);
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-lg);
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: var(--font-size-sm);
            text-decoration: none;
            cursor: pointer;
            transition: all var(--transition-base);
            border: none;
            outline: none;
            position: relative;
            overflow: hidden;
            letter-spacing: -0.01em;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }
        
        .btn:active::before {
            width: 300px;
            height: 300px;
        }
        
        .btn-primary {
            background: var(--gradient-accent);
            color: white;
            box-shadow: 0 2px 4px rgba(221, 65, 36, 0.2);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(221, 65, 36, 0.3);
        }
        
        .btn-secondary {
            background: var(--gradient-primary);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--m5-success) 0%, #059669 100%);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .btn-ghost {
            background: transparent;
            color: var(--m5-gray-600);
            border: 1px solid var(--m5-gray-300);
        }
        
        .btn-ghost:hover {
            background: var(--gradient-hover);
            color: var(--m5-primary);
            border-color: var(--m5-primary);
            transform: translateY(-1px);
        }
        
        /* Tables */
        .table-container {
            overflow-x: auto;
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--m5-gray-200);
            box-shadow: var(--shadow-card);
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th {
            background: var(--gradient-primary);
            padding: var(--space-md);
            text-align: left;
            font-weight: 700;
            font-size: var(--font-size-sm);
            color: white;
            border-bottom: none;
            letter-spacing: 0.02em;
        }
        
        .table td {
            padding: var(--space-md);
            border-bottom: 1px solid var(--m5-gray-100);
        }
        
        .table tr:hover {
            background: var(--gradient-hover);
            transform: scale(1.01);
            transition: all var(--transition-base);
        }
        
        /* Status Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: var(--space-xs) var(--space-sm);
            border-radius: 9999px;
            font-size: var(--font-size-xs);
            font-weight: 700;
            letter-spacing: 0.02em;
            transition: all var(--transition-base);
        }
        
        .badge-success {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(16, 185, 129, 0.05) 100%);
            color: var(--m5-success);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .badge-warning {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(245, 158, 11, 0.05) 100%);
            color: var(--m5-warning);
            border: 1px solid rgba(245, 158, 11, 0.2);
        }
        
        .badge-danger {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(239, 68, 68, 0.05) 100%);
            color: var(--m5-danger);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }
        
        .badge-info {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0.05) 100%);
            color: var(--m5-info);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--gradient-accent);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--m5-primary-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            line-height: 1;
            box-shadow: 0 2px 4px rgba(221, 65, 36, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(221, 65, 36, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(221, 65, 36, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(221, 65, 36, 0);
            }
        }
        
        .notification-badge::after {
            content: '3';
        }
        
        .nav-link {
            position: relative;
        }
        
        /* Notification Dropdown Styles */
        .notification-dropdown {
            position: relative;
        }
        
        .notification-dropdown .btn {
            position: relative;
        }
        
        .notification-indicator {
            position: absolute;
            top: 4px;
            right: 4px;
            background: var(--gradient-accent);
            color: white;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            padding: 0 4px;
            animation: pulse 2s infinite;
        }
        
        .notification-indicator.hidden {
            display: none;
        }
        
        .notification-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: var(--space-sm);
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: 0 10px 30px rgba(52, 73, 94, 0.2);
            width: 380px;
            max-height: 500px;
            display: none;
            z-index: var(--z-dropdown);
            border: 1px solid var(--m5-gray-200);
            overflow: hidden;
        }
        
        .notification-menu.show {
            display: flex;
            flex-direction: column;
        }
        
        .notification-header {
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid var(--m5-gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--m5-gray-50);
        }
        
        .notification-header h3 {
            margin: 0;
            font-size: var(--font-size-lg);
            color: var(--m5-gray-900);
        }
        
        .notification-list {
            flex: 1;
            overflow-y: auto;
            max-height: 350px;
        }
        
        .notification-item {
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid var(--m5-gray-100);
            transition: background var(--transition-base);
            position: relative;
        }
        
        .notification-item:hover {
            background: var(--m5-gray-50);
        }
        
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(221, 65, 36, 0.1);
            color: var(--m5-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .notification-content {
            flex: 1;
            min-width: 0;
        }
        
        .notification-content h4 {
            margin: 0 0 var(--space-xs) 0;
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--m5-gray-900);
        }
        
        .notification-content p {
            margin: 0 0 var(--space-xs) 0;
            font-size: var(--font-size-sm);
            color: var(--m5-gray-700);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .notification-time {
            font-size: var(--font-size-xs);
            color: var(--m5-gray-500);
        }
        
        .notification-dismiss {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            background: none;
            border: none;
            padding: var(--space-xs);
            cursor: pointer;
            color: var(--m5-gray-400);
            border-radius: var(--radius-sm);
            opacity: 0;
            transition: all var(--transition-base);
        }
        
        .notification-item:hover .notification-dismiss {
            opacity: 1;
        }
        
        .notification-dismiss:hover {
            background: var(--m5-gray-200);
            color: var(--m5-gray-700);
        }
        
        .notification-footer {
            padding: var(--space-sm) var(--space-lg);
            border-top: 1px solid var(--m5-gray-200);
            background: var(--m5-gray-50);
        }
        
        .notification-view-all {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            text-decoration: none;
            color: var(--m5-primary);
            font-weight: 500;
            font-size: var(--font-size-sm);
            padding: var(--space-sm);
            border-radius: var(--border-radius);
            transition: all var(--transition-base);
        }
        
        .notification-view-all:hover {
            background: var(--m5-gray-100);
        }
        
        .notification-empty {
            padding: var(--space-2xl);
            text-align: center;
            color: var(--m5-gray-500);
        }
        
        .notification-empty .material-symbols-outlined {
            font-size: 48px;
            color: var(--m5-gray-300);
            margin-bottom: var(--space-md);
        }
        
        /* Loading States */
        .skeleton {
            background: linear-gradient(90deg, rgba(52, 73, 94, 0.1) 25%, rgba(52, 73, 94, 0.05) 50%, rgba(52, 73, 94, 0.1) 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: var(--border-radius);
        }
        
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* View Transitions */
        .view {
            animation: view-enter 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes view-enter {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .view-leave {
            animation: view-leave 200ms ease-out forwards;
        }
        
        @keyframes view-leave {
            to {
                opacity: 0;
                transform: translateY(-10px);
            }
        }
        
        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(20px);
            }
        }
        
        /* Mobile Styles */
        @media (max-width: 768px) {
            .navbar-nav {
                display: none;
            }
            
            .sidebar {
                display: none;
            }
            
            .content {
                padding: var(--space-md);
            }
            
            .grid-cols-2,
            .grid-cols-3,
            .grid-cols-4 {
                grid-template-columns: 1fr;
            }
            
            .page-title {
                font-size: var(--font-size-2xl);
            }
            
            /* Mobile Navigation */
            .mobile-nav {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border-top: 1px solid var(--m5-gray-200);
                display: flex;
                justify-content: space-around;
                padding: var(--space-sm) 0;
                box-shadow: 0 -4px 20px rgba(52, 73, 94, 0.1);
            }
            
            .mobile-nav .nav-link {
                flex-direction: column;
                font-size: var(--font-size-xs);
                padding: var(--space-xs) var(--space-sm);
                gap: var(--space-xs);
            }
            
            .main {
                padding-bottom: 60px;
            }
        }
        
        @media (min-width: 769px) {
            .mobile-nav {
                display: none;
            }
        }
        
        /* Program Status Steps */
        .program-step {
            background: var(--gradient-card);
            border: 2px solid var(--m5-gray-200);
            border-radius: var(--border-radius-lg);
            padding: var(--space-sm) var(--space-xs);
            text-align: center;
            transition: all var(--transition-base);
            position: relative;
            overflow: visible;
        }
        
        .program-step::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, transparent 0%, rgba(52, 73, 94, 0.02) 100%);
            opacity: 0;
            transition: opacity var(--transition-base);
            pointer-events: none;
        }
        
        .program-step:hover::after {
            opacity: 1;
        }
        
        .program-step.completed {
            background: var(--m5-gray-50);
            border-color: var(--m5-gray-300);
            opacity: 0.7;
        }
        
        .program-step.active {
            background: linear-gradient(135deg, rgba(221, 65, 36, 0.05) 0%, rgba(221, 65, 36, 0.02) 100%);
            border-color: var(--m5-accent);
            box-shadow: 0 0 0 4px rgba(221, 65, 36, 0.1), var(--shadow-glow);
            transform: scale(1.02);
        }
        
        .step-icon {
            font-size: 28px;
            margin-bottom: var(--space-xs);
        }
        
        .program-step.completed .step-icon {
            color: var(--m5-gray-500);
        }
        
        .program-step.active .step-icon {
            color: var(--m5-accent);
            filter: drop-shadow(0 2px 4px rgba(221, 65, 36, 0.3));
        }
        
        .step-title {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--m5-gray-900);
            margin-bottom: 2px;
            letter-spacing: -0.01em;
            line-height: 1.2;
        }
        
        .step-status {
            font-size: var(--font-size-xs);
            color: var(--m5-gray-600);
            line-height: 1.2;
        }
        
        .program-step.active .step-status {
            color: var(--m5-accent);
            font-weight: 700;
        }
        
        .program-step .btn {
            position: relative;
            z-index: 10;
            cursor: pointer;
        }
        
        #configEditBtn {
            margin-top: 8px;
        }
        
        /* File Management Styles */
        .file-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--gradient-card);
            border-radius: var(--border-radius-lg);
            margin-bottom: var(--space-lg);
        }
        
        .file-search {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            background: white;
            border: 2px solid var(--m5-gray-200);
            border-radius: var(--border-radius);
            padding: var(--space-sm) var(--space-md);
            min-width: 250px;
            transition: all var(--transition-base);
        }
        
        .file-search:focus-within {
            border-color: var(--m5-accent);
            box-shadow: 0 0 0 3px rgba(221, 65, 36, 0.1);
        }
        
        .file-search-input {
            border: none;
            background: none;
            outline: none;
            flex: 1;
            font-size: var(--font-size-sm);
        }
        
        .file-breadcrumb {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-size-sm);
            color: var(--m5-gray-600);
        }
        
        .breadcrumb-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            cursor: pointer;
            transition: color var(--transition-base);
        }
        
        .breadcrumb-item:hover {
            color: var(--m5-primary);
        }
        
        .breadcrumb-separator {
            color: var(--m5-gray-400);
        }
        
        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: var(--space-md);
            padding: var(--space-lg);
        }
        
        .file-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--space-lg) var(--space-md);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all var(--transition-base);
            text-align: center;
        }
        
        .file-item:hover {
            background: var(--gradient-hover);
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-md);
        }
        
        .file-icon {
            font-size: 48px;
            margin-bottom: var(--space-sm);
            color: var(--m5-gray-400);
        }
        
        .file-item.folder .file-icon {
            color: var(--m5-primary);
            filter: drop-shadow(0 2px 4px rgba(52, 73, 94, 0.2));
        }
        
        .file-icon.pdf {
            color: #DC3545;
        }
        
        .file-icon.image {
            color: #28A745;
        }
        
        .file-icon.doc {
            color: #0066CC;
        }
        
        .file-icon.video {
            color: #6F42C1;
        }
        
        .file-icon.spreadsheet {
            color: #28A745;
        }
        
        .file-name {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--m5-gray-900);
            margin-bottom: var(--space-xs);
            word-break: break-word;
            max-width: 100%;
            letter-spacing: -0.01em;
        }
        
        .file-meta {
            font-size: var(--font-size-xs);
            color: var(--m5-gray-500);
        }
        
        .file-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 var(--space-md);
        }
        
        /* File List View */
        .file-list {
            display: flex;
            flex-direction: column;
        }
        
        .file-list .file-item {
            display: flex;
            align-items: center;
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid var(--m5-gray-100);
            border-radius: 0;
            gap: var(--space-md);
            flex-direction: row;
            text-align: left;
        }
        
        .file-list .file-item:hover {
            background: var(--m5-gray-50);
            transform: none;
        }
        
        .file-list .file-icon {
            font-size: 24px;
            margin-bottom: 0;
            flex-shrink: 0;
        }
        
        .file-list .file-info {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-md);
        }
        
        .file-list .file-name {
            margin-bottom: 0;
        }
        
        .file-list .file-meta {
            text-align: right;
        }
        
        /* Active view button */
        .btn-ghost.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
        }
        
        /* Simplified Billing Styles */
        .simple-invoice-list {
            display: flex;
            flex-direction: column;
        }
        
        .simple-invoice-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-lg);
            border-bottom: 1px solid var(--m5-gray-100);
            gap: var(--space-lg);
            transition: background var(--transition-base);
        }
        
        .simple-invoice-item:hover {
            background: var(--gradient-hover);
            transform: translateX(4px);
        }
        
        .simple-invoice-item:last-child {
            border-bottom: none;
        }
        
        .invoice-main-info {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
            flex: 1;
        }
        
        .invoice-number {
            font-weight: 700;
            color: var(--m5-primary);
            font-size: var(--font-size-base);
            letter-spacing: -0.01em;
        }
        
        .invoice-date {
            font-size: var(--font-size-sm);
            color: var(--m5-gray-600);
        }
        
        .invoice-amount {
            font-weight: 700;
            font-size: var(--font-size-lg);
            color: var(--m5-primary-dark);
            min-width: 100px;
            text-align: right;
            letter-spacing: -0.02em;
        }
        
        .simple-invoice-item .btn-sm {
            padding: var(--space-xs) var(--space-md);
            font-size: var(--font-size-sm);
        }
        
        @media (max-width: 768px) {
            .simple-invoice-item {
                flex-wrap: wrap;
                gap: var(--space-md);
                padding: var(--space-md);
            }
            
            .invoice-main-info {
                width: 100%;
                order: 1;
            }
            
            .invoice-amount {
                order: 2;
                text-align: left;
            }
            
            .simple-invoice-item .badge {
                order: 3;
            }
            
            .simple-invoice-item .btn {
                order: 4;
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .file-toolbar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .file-search {
                width: 100%;
            }
            
            .file-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: var(--space-sm);
                padding: var(--space-md);
            }
            
            .file-item {
                padding: var(--space-md) var(--space-sm);
            }
            
            .file-icon {
                font-size: 36px;
            }
        }
        
        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: var(--z-modal);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-lg);
        }
        
        .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: var(--z-modal-backdrop);
        }
        
        .modal-content {
            position: relative;
            background: white;
            border-radius: var(--border-radius-xl);
            box-shadow: var(--shadow-xl);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            z-index: var(--z-modal);
            animation: modalEnter 300ms ease-out;
        }
        
        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-lg);
            border-bottom: 1px solid var(--m5-gray-200);
        }
        
        .modal-title-section {
            flex: 1;
        }
        
        .modal-title {
            font-size: var(--font-size-2xl);
            font-weight: 700;
            color: var(--m5-gray-900);
            margin: 0;
        }
        
        .modal-subtitle {
            font-size: var(--font-size-sm);
            color: var(--m5-gray-600);
            margin: var(--space-xs) 0 0 0;
        }
        
        .modal-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-lg);
        }

        /* Message Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            backdrop-filter: blur(4px);
        }

        .modal-overlay .modal-content {
            background: white;
            border-radius: var(--border-radius-xl);
            box-shadow: var(--shadow-xl);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }

        .modal-overlay .modal-header {
            padding: var(--space-lg);
            border-bottom: 1px solid var(--m5-gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-overlay .modal-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--m5-gray-900);
            margin: 0;
        }

        .modal-overlay .modal-close {
            background: none;
            border: none;
            padding: var(--space-xs);
            cursor: pointer;
            color: var(--m5-gray-600);
            border-radius: var(--radius-sm);
            transition: all var(--transition-base);
        }

        .modal-overlay .modal-close:hover {
            background: var(--m5-gray-100);
            color: var(--m5-gray-900);
        }

        .modal-overlay .modal-body {
            padding: var(--space-lg);
            flex: 1;
            overflow-y: auto;
        }

        .modal-overlay .modal-footer {
            padding: var(--space-lg);
            border-top: 1px solid var(--m5-gray-200);
            display: flex;
            gap: var(--space-md);
            justify-content: flex-end;
        }

        .modal-overlay .form-group {
            margin-bottom: var(--space-lg);
        }

        .modal-overlay .form-group:last-child {
            margin-bottom: 0;
        }

        .modal-overlay .form-group label {
            display: block;
            font-size: var(--font-size-sm);
            font-weight: 500;
            color: var(--m5-gray-700);
            margin-bottom: var(--space-sm);
        }

        .modal-overlay .form-control {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--m5-gray-300);
            border-radius: var(--radius-md);
            font-size: var(--font-size-base);
            font-family: var(--font-primary);
            transition: all var(--transition-base);
        }

        .modal-overlay .form-control:focus {
            outline: none;
            border-color: var(--m5-primary);
            box-shadow: 0 0 0 3px rgba(52, 73, 94, 0.1);
        }

        .modal-overlay textarea.form-control {
            resize: vertical;
            min-height: 120px;
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            background: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            padding: var(--space-md) var(--space-lg);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            transform: translateY(calc(100% + var(--space-xl)));
            transition: transform var(--transition-base);
            z-index: calc(var(--z-modal) + 10);
            max-width: 400px;
        }

        .notification.show {
            transform: translateY(0);
        }

        .notification-success {
            border-left: 4px solid var(--m5-success);
        }

        .notification-success .material-symbols-outlined {
            color: var(--m5-success);
        }

        .notification-error {
            border-left: 4px solid var(--m5-danger);
        }

        .notification-error .material-symbols-outlined {
            color: var(--m5-danger);
        }

        .notification-info {
            border-left: 4px solid var(--m5-info);
        }

        .notification-info .material-symbols-outlined {
            color: var(--m5-info);
        }
        
        .file-preview {
            background: var(--m5-gray-50);
            border-radius: var(--border-radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-lg);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .file-preview img {
            max-width: 100%;
            max-height: 400px;
            border-radius: var(--border-radius);
        }
        
        .file-preview .preview-icon {
            font-size: 64px;
            color: var(--m5-gray-400);
        }
        
        .file-actions {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
            flex-wrap: wrap;
        }
        
        .file-details {
            margin-bottom: var(--space-xl);
        }
        
        .file-details h3,
        .file-comments h3 {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--m5-gray-900);
            margin: 0 0 var(--space-md) 0;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
        }
        
        .detail-item {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }
        
        .detail-label {
            font-size: var(--font-size-sm);
            color: var(--m5-gray-600);
            font-weight: 500;
        }
        
        .detail-value {
            font-size: var(--font-size-base);
            color: var(--m5-gray-900);
        }
        
        .comments-list {
            margin-bottom: var(--space-lg);
        }
        
        .comment {
            display: flex;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }
        
        .comment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--m5-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: var(--font-size-sm);
            flex-shrink: 0;
        }
        
        .comment-content {
            flex: 1;
        }
        
        .comment-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-xs);
        }
        
        .comment-author {
            font-weight: 600;
            color: var(--m5-gray-900);
        }
        
        .comment-time {
            font-size: var(--font-size-sm);
            color: var(--m5-gray-500);
        }
        
        .comment-text {
            color: var(--m5-gray-700);
            line-height: 1.6;
            margin: 0;
        }
        
        .comment-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }
        
        .comment-input {
            width: 100%;
            min-height: 80px;
            padding: var(--space-md);
            border: 1px solid var(--m5-gray-300);
            border-radius: var(--border-radius);
            font-family: var(--font-primary);
            font-size: var(--font-size-base);
            resize: vertical;
            outline: none;
            transition: border-color var(--transition-base);
        }
        
        .comment-input:focus {
            border-color: var(--m5-primary);
        }
        
        @media (max-width: 768px) {
            .modal {
                padding: 0;
            }
            
            .modal-content {
                max-width: 100%;
                height: 100%;
                max-height: 100%;
                border-radius: 0;
            }
            
            .detail-grid {
                grid-template-columns: 1fr;
            }
            
            .file-actions {
                flex-direction: column;
            }
            
            .file-actions .btn {
                width: 100%;
            }
        }
        
        /* Invoice Modal Styles */
        .invoice-preview {
            background: white;
            padding: var(--space-xl);
            margin-bottom: var(--space-lg);
        }
        
        .invoice-header-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-xl);
            padding-bottom: var(--space-xl);
            border-bottom: 2px solid var(--m5-gray-200);
        }
        
        .invoice-modal-number {
            font-size: var(--font-size-3xl);
            color: var(--m5-primary);
            margin: 0 0 var(--space-md) 0;
        }
        
        .invoice-bill-to {
            margin-bottom: var(--space-xl);
        }
        
        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--space-xl);
        }
        
        .invoice-table th {
            background: var(--m5-gray-50);
            padding: var(--space-md);
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid var(--m5-gray-200);
        }
        
        .invoice-table td {
            padding: var(--space-md);
            border-bottom: 1px solid var(--m5-gray-100);
        }
        
        .invoice-table tfoot td {
            border-bottom: none;
            padding-top: var(--space-md);
        }
        
        .invoice-total td {
            font-size: var(--font-size-lg);
            border-top: 2px solid var(--m5-gray-200);
            padding-top: var(--space-lg);
        }
        
        .invoice-actions {
            display: flex;
            gap: var(--space-md);
            flex-wrap: wrap;
        }
        
        .invoice-notes {
            margin-top: var(--space-xl);
            padding-top: var(--space-xl);
            border-top: 1px solid var(--m5-gray-200);
        }
        
        /* Mobile Menu Overlay Styles */
        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: var(--z-modal);
            display: none;
        }
        
        .mobile-menu-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .mobile-menu-content {
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 280px;
            background: white;
            box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            animation: slideInRight 300ms ease-out;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }
        
        .mobile-menu-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-lg);
            border-bottom: 1px solid var(--m5-gray-200);
        }
        
        .mobile-menu-header h3 {
            margin: 0;
            font-size: var(--font-size-xl);
            color: var(--m5-gray-900);
        }
        
        .mobile-menu-body {
            padding: var(--space-lg);
        }
        
        .mobile-menu-section {
            margin-bottom: var(--space-xl);
        }
        
        .mobile-menu-title {
            font-size: var(--font-size-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--m5-gray-500);
            margin-bottom: var(--space-md);
        }
        
        .mobile-menu-link {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            border-radius: var(--border-radius);
            text-decoration: none;
            color: var(--m5-gray-700);
            font-weight: 500;
            transition: all var(--transition-base);
            margin-bottom: var(--space-sm);
        }
        
        .mobile-menu-link:hover {
            background: var(--m5-gray-50);
            color: var(--m5-gray-900);
        }
        
        .mobile-menu-link .material-symbols-outlined {
            font-size: 20px;
            color: var(--m5-gray-600);
        }
        
        /* Utility Classes */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-muted { color: var(--m5-gray-600); }
        .text-small { font-size: var(--font-size-sm); }
        .text-large { font-size: var(--font-size-lg); }
        
        .mt-1 { margin-top: var(--space-xs); }
        .mt-2 { margin-top: var(--space-sm); }
        .mt-3 { margin-top: var(--space-md); }
        .mt-4 { margin-top: var(--space-lg); }
        .mt-5 { margin-top: var(--space-xl); }
        
        .mb-1 { margin-bottom: var(--space-xs); }
        .mb-2 { margin-bottom: var(--space-sm); }
        .mb-3 { margin-bottom: var(--space-md); }
        .mb-4 { margin-bottom: var(--space-lg); }
        .mb-5 { margin-bottom: var(--space-xl); }
        
        .hidden { display: none !important; }
        .block { display: block !important; }
        .flex { display: flex !important; }

        /* Widget Configuration Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            backdrop-filter: blur(4px);
        }

        .popup-container {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .popup-header {
            padding: var(--space-lg);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .popup-header h2 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--text-primary);
        }

        .btn-close {
            background: none;
            border: none;
            padding: var(--space-sm);
            cursor: pointer;
            color: var(--text-muted);
            transition: color 0.2s;
        }

        .btn-close:hover {
            color: var(--text-primary);
        }

        .popup-body {
            flex: 1;
            padding: var(--space-lg);
            overflow-y: auto;
        }

        /* Step Indicator Styles */
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-xl);
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--border-color);
            z-index: 0;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
            position: relative;
            z-index: 1;
            flex: 1;
            cursor: pointer;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--text-muted);
            transition: all 0.3s;
        }

        .step.active .step-number {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .step.completed .step-number {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .step-title {
            font-size: 0.875rem;
            color: var(--text-muted);
            text-align: center;
            transition: color 0.3s;
        }

        .step.active .step-title {
            color: var(--primary);
            font-weight: 600;
        }

        /* Step Content Styles */
        .step-content {
            min-height: 400px;
        }

        .step-panel {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .step-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-panel h3 {
            margin-bottom: var(--space-lg);
            color: var(--text-primary);
        }

        /* Widget Type Grid */
        .widget-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
        }

        .widget-type-card {
            position: relative;
            cursor: pointer;
        }

        .widget-type-card input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .widget-type-card .card-content {
            padding: var(--space-lg);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            text-align: center;
            transition: all 0.3s;
        }

        .widget-type-card input[type="radio"]:checked + .card-content {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .widget-type-card .material-symbols-outlined {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: var(--space-sm);
        }

        .widget-type-card h4 {
            margin: var(--space-sm) 0;
            color: var(--text-primary);
        }

        .widget-type-card p {
            margin: 0;
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-md);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }

        .form-group label {
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-group input[type="text"],
        .form-group input[type="color"],
        .form-group textarea,
        .form-group select {
            padding: var(--space-sm);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            background: var(--bg-secondary);
            color: var(--text-primary);
            transition: border-color 0.2s;
        }

        .form-group input[type="text"]:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }

        /* Field Selector */
        .field-selector {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .field-item {
            padding: var(--space-md);
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            transition: background 0.2s;
        }

        .field-item:hover {
            background: var(--bg-hover);
        }

        .field-item label {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            cursor: pointer;
        }

        .field-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        /* Review Summary */
        .review-summary {
            background: var(--bg-secondary);
            padding: var(--space-lg);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-lg);
        }

        .review-summary p {
            margin: var(--space-sm) 0;
            color: var(--text-primary);
        }

        .review-summary strong {
            color: var(--text-primary);
            margin-right: var(--space-sm);
        }

        /* Code Section */
        .code-section {
            background: var(--bg-secondary);
            padding: var(--space-lg);
            border-radius: var(--radius-md);
        }

        .code-section h4 {
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .code-section pre {
            background: var(--bg-primary);
            padding: var(--space-md);
            border-radius: var(--radius-sm);
            overflow-x: auto;
            margin: var(--space-md) 0;
        }

        .code-section code {
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            color: var(--text-primary);
        }

        /* Step Navigation */
        .step-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-xl);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--border-color);
        }

        .step-navigation .btn {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        /* Configuration Modal Styles */
        .config-section {
            margin-bottom: var(--space-xl);
            padding-bottom: var(--space-xl);
            border-bottom: 1px solid var(--border-color);
        }
        
        .config-section:last-of-type {
            border-bottom: none;
            margin-bottom: var(--space-lg);
            padding-bottom: 0;
        }
        
        .config-section-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-lg);
        }
        
        .config-section-title .material-symbols-outlined {
            font-size: 24px;
            color: var(--m5-primary);
        }
        
        .config-actions {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-top: var(--space-xl);
            padding-top: var(--space-xl);
            border-top: 1px solid var(--border-color);
        }
        
        .configuration-content .form-group textarea {
            min-height: 60px;
            font-family: var(--font-primary);
            line-height: 1.5;
        }
        
        .configuration-content .form-group input[readonly] {
            background: var(--bg-secondary);
            cursor: not-allowed;
            opacity: 0.8;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .popup-container {
                width: 95%;
                max-height: 95vh;
            }

            .step-indicator {
                flex-wrap: wrap;
            }

            .step-title {
                font-size: 0.75rem;
            }

            .widget-type-grid {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .config-actions {
                flex-wrap: wrap;
            }
            
            .config-actions button {
                width: 100%;
            }
            
            .config-actions div[style*="flex: 1"] {
                display: none;
            }
        }
        
        /* Add User Form Styles */
        .form-section {
            margin-bottom: var(--space-2xl);
        }
        
        .form-section-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--m5-primary);
            margin-bottom: var(--space-sm);
        }
        
        .form-section-title .material-symbols-outlined {
            color: var(--m5-primary);
            font-size: 24px;
        }
        
        .form-section-subtitle {
            color: var(--m5-gray-600);
            margin-bottom: var(--space-lg);
            font-size: var(--font-size-sm);
        }
        
        .permission-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-md);
        }
        
        .permission-card {
            position: relative;
            display: block;
            cursor: pointer;
            border-radius: var(--border-radius);
            border: 2px solid var(--m5-gray-200);
            background: white;
            transition: all var(--transition-base);
            overflow: hidden;
        }
        
        .permission-card:hover {
            border-color: var(--m5-primary-light);
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
        
        .permission-card input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }
        
        .permission-card input[type="checkbox"]:checked + .permission-content {
            background: var(--primary-light);
            border-color: var(--m5-primary);
        }
        
        .permission-card input[type="checkbox"]:checked + .permission-content .permission-check {
            opacity: 1;
            transform: scale(1);
            background: var(--m5-primary);
            color: white;
        }
        
        .permission-content {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-lg);
            position: relative;
            transition: all var(--transition-base);
        }
        
        .permission-icon {
            flex-shrink: 0;
            width: 48px;
            height: 48px;
            border-radius: var(--border-radius);
            background: var(--m5-gray-100);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-base);
        }
        
        .permission-icon .material-symbols-outlined {
            font-size: 20px;
            color: var(--m5-primary);
        }
        
        .permission-card:hover .permission-icon {
            background: var(--m5-primary);
        }
        
        .permission-card:hover .permission-icon .material-symbols-outlined {
            color: white;
        }
        
        .permission-info {
            flex: 1;
        }
        
        .permission-info h4 {
            margin: 0 0 var(--space-xs) 0;
            font-size: var(--font-size-base);
            font-weight: 600;
            color: var(--m5-gray-800);
        }
        
        .permission-info p {
            margin: 0;
            font-size: var(--font-size-sm);
            color: var(--m5-gray-600);
            line-height: 1.4;
        }
        
        .permission-check {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--m5-gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0.8);
            transition: all var(--transition-base);
        }
        
        .permission-check .material-symbols-outlined {
            font-size: 16px;
        }
        
        .form-actions {
            display: flex;
            gap: var(--space-md);
            justify-content: flex-end;
            margin-top: var(--space-2xl);
            padding-top: var(--space-xl);
            border-top: 1px solid var(--m5-gray-200);
        }
        
        /* Global form control styles for consistency */
        .form-control {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--m5-gray-300);
            border-radius: var(--radius-md);
            font-size: var(--font-size-base);
            font-family: var(--font-primary);
            background: white;
            color: var(--m5-gray-800);
            transition: all var(--transition-base);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--m5-primary);
            box-shadow: 0 0 0 3px rgba(52, 73, 94, 0.1);
        }

        .form-control:disabled {
            background: var(--m5-gray-100);
            color: var(--m5-gray-500);
            cursor: not-allowed;
        }

        select.form-control {
            cursor: pointer;
        }

        textarea.form-control {
            resize: vertical;
            min-height: 120px;
        }
        
        @media (max-width: 768px) {
            .permission-grid {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column-reverse;
            }
            
            .form-actions button {
                width: 100%;
            }
        }
        
        /* Additional Modern Effects */
        
        /* Form Input Enhancements */
        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="number"],
        select,
        textarea {
            background: white;
            border: 2px solid var(--m5-gray-200);
            border-radius: var(--border-radius);
            padding: var(--space-sm) var(--space-md);
            font-size: var(--font-size-base);
            transition: all var(--transition-base);
            font-family: var(--font-primary);
        }
        
        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="password"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--m5-accent);
            box-shadow: 0 0 0 3px rgba(221, 65, 36, 0.1);
        }
        
        /* Enhanced Charts */
        .chart-container {
            background: var(--gradient-card);
            border-radius: var(--border-radius-lg);
            padding: var(--space-lg);
            box-shadow: var(--shadow-card);
            position: relative;
            overflow: hidden;
        }
        
        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, var(--m5-accent) 0%, transparent 70%);
            opacity: 0.1;
            transform: translate(30%, -30%);
        }
        
        /* Progress Bars */
        .progress {
            height: 8px;
            background: var(--m5-gray-200);
            border-radius: 999px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--gradient-accent);
            border-radius: 999px;
            transition: width var(--transition-slow);
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
            animation: progress-shine 2s infinite;
        }
        
        @keyframes progress-shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Tooltips */
        [data-tooltip] {
            position: relative;
        }
        
        [data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px);
            background: var(--m5-gray-900);
            color: white;
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--border-radius);
            font-size: var(--font-size-xs);
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all var(--transition-base);
            z-index: var(--z-tooltip);
        }
        
        [data-tooltip]:hover::after {
            opacity: 1;
            transform: translateX(-50%) translateY(-12px);
        }
        
        /* Smooth Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--m5-gray-100);
            border-radius: 999px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--m5-primary);
            border-radius: 999px;
            border: 2px solid var(--m5-gray-100);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--m5-primary-dark);
        }
        
        /* Focus Visible */
        :focus-visible {
            outline: 2px solid var(--m5-accent);
            outline-offset: 2px;
        }
        
        /* Selection */
        ::selection {
            background: var(--m5-accent);
            color: white;
        }
        
        /* Gradient Text */
        .gradient-text {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Glow Effect */
        .glow {
            box-shadow: 0 0 20px rgba(221, 65, 36, 0.3);
        }
        
        /* Card Hover Effects */
        .hover-lift {
            transition: all var(--transition-base);
        }
        
        .hover-lift:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
        }
        
        /* Animated Background */
        .animated-bg {
            background: linear-gradient(270deg, var(--m5-primary), var(--m5-secondary), var(--m5-accent));
            background-size: 600% 600%;
            animation: gradient-shift 30s ease infinite;
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Modern Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-base);
        }
        
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: var(--border-radius-xl);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow: auto;
            transform: scale(0.9);
            transition: transform var(--transition-spring);
        }
        
        .modal.show .modal-content {
            transform: scale(1);
        }
        
        /* User Avatar */
        .user-avatar {
            width: 32px;
            height: 32px;
            background: var(--gradient-accent);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: var(--font-size-sm);
            letter-spacing: -0.02em;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--space-3xl) var(--space-xl);
            color: var(--m5-gray-500);
        }
        
        .empty-state-icon {
            font-size: 64px;
            color: var(--m5-gray-300);
            margin-bottom: var(--space-lg);
        }
        
        /* Conversational Lead Magnet Styles */
        .chat-widget {
            position: fixed;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, sans-serif;
            z-index: 10000;
        }
        
        .chat-widget.popup {
            bottom: 100px;
            right: 24px;
            width: 380px;
            max-height: 600px;
        }
        
        .chat-widget.slide {
            top: 50%;
            right: -380px;
            width: 380px;
            max-height: 600px;
            transform: translateY(-50%);
            transition: right 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .chat-widget.slide.active {
            right: 0;
        }
        
        .chat-widget.embedded {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: 400px;
            margin: 0 auto;
        }
        
        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .agent-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .agent-info h4 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }
        
        .agent-info p {
            margin: 2px 0 0;
            font-size: 13px;
            opacity: 0.9;
        }
        
        .chat-status {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            opacity: 0.9;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4ade80;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .chat-messages {
            padding: 20px;
            height: 350px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
            background: #f8fafc;
        }
        
        .message {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            max-width: 85%;
        }
        
        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
        }
        
        .message.agent .message-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .message.user .message-avatar {
            background: #e2e8f0;
            color: #475569;
        }
        
        .message-bubble {
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 15px;
            line-height: 1.4;
            position: relative;
            word-break: break-word;
        }
        
        .message.agent .message-bubble {
            background: white;
            color: #1e293b;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .message.user .message-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .message-time {
            font-size: 11px;
            opacity: 0.6;
            margin-top: 4px;
            text-align: center;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 16px 0;
        }
        
        .typing-dots {
            display: flex;
            gap: 4px;
            align-items: center;
            background: white;
            padding: 12px 16px;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #94a3b8;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        .chat-input-area {
            padding: 16px 20px;
            background: white;
            border-top: 1px solid #e2e8f0;
        }
        
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .quick-reply {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            color: #475569;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quick-reply:hover {
            background: #e2e8f0;
            border-color: #cbd5e1;
        }
        
        .chat-input {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 24px;
            padding: 4px;
            transition: all 0.2s ease;
        }
        
        .chat-input:focus-within {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .chat-input input {
            flex: 1;
            border: none;
            background: transparent;
            padding: 12px 16px;
            font-size: 15px;
            outline: none;
            color: #1e293b;
        }
        
        .chat-input input::placeholder {
            color: #94a3b8;
        }
        
        .send-button {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-right: 4px;
        }
        
        .send-button:hover {
            transform: scale(1.05);
        }
        
        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .floating-button {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.4);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .floating-button:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 40px rgba(102, 126, 234, 0.5);
        }
        
        .floating-button.pulse {
            animation: floating-pulse 2s infinite;
        }
        
        @keyframes floating-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .conversation-step {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
        }
        
        .step-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .step-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .step-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .form-field {
            margin-bottom: 16px;
        }
        
        .field-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
            font-size: 14px;
        }
        
        .field-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.2s ease;
            background: #f9fafb;
        }
        
        .field-input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .action-button {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .action-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .action-button.primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .action-button.secondary {
            background: #f1f5f9;
            color: #475569;
            border: 1px solid #e2e8f0;
        }
        
        .action-button.secondary:hover {
            background: #e2e8f0;
        }
        
        /* Mobile Responsive */
        @media (max-width: 480px) {
            .chat-widget.popup,
            .chat-widget.slide {
                width: calc(100vw - 16px);
                right: 8px;
                bottom: 80px;
            }
            
            .chat-widget.slide {
                right: -100vw;
            }
            
            .chat-widget.slide.active {
                right: 8px;
            }
            
            .floating-button {
                width: 56px;
                height: 56px;
                font-size: 24px;
                bottom: 20px;
                right: 20px;
            }
        }
        
        .empty-state-title {
            font-size: var(--font-size-xl);
            font-weight: 700;
            color: var(--m5-gray-700);
            margin-bottom: var(--space-sm);
        }
        
        .empty-state-text {
            font-size: var(--font-size-base);
            color: var(--m5-gray-600);
            margin-bottom: var(--space-xl);
        }
        
        /* File Upload Modal Styles */
        .upload-dropzone {
            border: 3px dashed var(--m5-gray-300);
            border-radius: var(--border-radius-lg);
            padding: var(--space-3xl) var(--space-xl);
            text-align: center;
            background: var(--m5-gray-50);
            transition: all var(--transition-base);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .upload-dropzone::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, var(--m5-accent) 0%, transparent 70%);
            opacity: 0;
            transform: scale(0);
            transition: all var(--transition-slow);
        }
        
        .upload-dropzone:hover {
            border-color: var(--m5-accent);
            background: rgba(221, 65, 36, 0.02);
        }
        
        .upload-dropzone.dragover {
            border-color: var(--m5-accent);
            background: rgba(221, 65, 36, 0.05);
            box-shadow: 0 0 20px rgba(221, 65, 36, 0.1);
        }
        
        .upload-dropzone.dragover::before {
            opacity: 0.1;
            transform: scale(1);
        }
        
        .upload-icon {
            font-size: 64px;
            color: var(--m5-gray-400);
            margin-bottom: var(--space-lg);
            transition: all var(--transition-base);
        }
        
        .upload-dropzone:hover .upload-icon,
        .upload-dropzone.dragover .upload-icon {
            color: var(--m5-accent);
            transform: scale(1.1);
        }
        
        .upload-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            color: var(--m5-gray-900);
            margin-bottom: var(--space-sm);
        }
        
        .upload-subtitle {
            font-size: var(--font-size-base);
            color: var(--m5-gray-600);
            margin-bottom: var(--space-lg);
        }
        
        .upload-button {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
        }
        
        .upload-input {
            display: none;
        }
        
        .upload-destination {
            margin-top: var(--space-xl);
            padding-top: var(--space-xl);
            border-top: 1px solid var(--m5-gray-200);
        }
        
        .destination-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--m5-gray-900);
            margin-bottom: var(--space-md);
        }
        
        .folder-tree {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--m5-gray-200);
            border-radius: var(--border-radius);
            padding: var(--space-md);
            background: white;
        }
        
        .folder-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all var(--transition-base);
            user-select: none;
        }
        
        .folder-item:hover {
            background: var(--m5-gray-50);
        }
        
        .folder-item.selected {
            background: var(--gradient-primary);
            color: white;
        }
        
        .folder-item.selected .folder-icon {
            color: white;
        }
        
        .folder-icon {
            font-size: 20px;
            color: var(--m5-primary);
        }
        
        .folder-name {
            flex: 1;
            font-size: var(--font-size-sm);
            font-weight: 500;
        }
        
        .folder-item.nested {
            padding-left: calc(var(--space-md) + var(--space-lg));
        }
        
        .folder-item.nested-2 {
            padding-left: calc(var(--space-md) + var(--space-lg) * 2);
        }
        
        .upload-file-list {
            margin-top: var(--space-lg);
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }
        
        .upload-file-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--m5-gray-50);
            border-radius: var(--border-radius);
            transition: all var(--transition-base);
        }
        
        .upload-file-item:hover {
            background: var(--m5-gray-100);
        }
        
        .upload-file-icon {
            font-size: 24px;
            color: var(--m5-gray-500);
        }
        
        .upload-file-info {
            flex: 1;
        }
        
        .upload-file-name {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--m5-gray-900);
        }
        
        .upload-file-size {
            font-size: var(--font-size-xs);
            color: var(--m5-gray-600);
        }
        
        .upload-file-remove {
            padding: var(--space-xs);
            color: var(--m5-gray-500);
            cursor: pointer;
            transition: all var(--transition-base);
            border-radius: var(--border-radius);
        }
        
        .upload-file-remove:hover {
            background: var(--m5-danger);
            color: white;
        }
        
        .upload-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--m5-gray-200);
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            overflow: hidden;
        }
        
        .upload-progress-bar {
            height: 100%;
            background: var(--gradient-accent);
            transition: width var(--transition-slow);
            position: relative;
            overflow: hidden;
        }
        
        .upload-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
            animation: progress-shine 2s infinite;
        }
        
        .upload-actions {
            display: flex;
            gap: var(--space-md);
            margin-top: var(--space-xl);
            padding-top: var(--space-xl);
            border-top: 1px solid var(--m5-gray-200);
        }
        
        .upload-summary {
            font-size: var(--font-size-sm);
            color: var(--m5-gray-600);
        }
        
        /* Lead Magnet Configuration Styles */
        .config-panel {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-card);
            overflow: hidden;
        }
        
        .config-tabs {
            display: flex;
            border-bottom: 1px solid var(--m5-gray-200);
            background: var(--m5-gray-50);
        }
        
        .config-tab {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-lg);
            border: none;
            background: transparent;
            color: var(--m5-gray-600);
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-base);
            border-bottom: 3px solid transparent;
        }
        
        .config-tab:hover {
            background: rgba(221, 65, 36, 0.05);
            color: var(--m5-accent);
        }
        
        .config-tab.active {
            background: white;
            color: var(--m5-accent);
            border-bottom-color: var(--m5-accent);
        }
        
        .config-content {
            padding: var(--space-2xl);
        }
        
        .config-tab-content {
            display: none;
        }
        
        .config-tab-content.active {
            display: block;
        }
        
        /* Template Grid */
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-lg);
        }
        
        .template-card {
            border: 2px solid var(--m5-gray-200);
            border-radius: var(--border-radius-lg);
            padding: var(--space-lg);
            cursor: pointer;
            transition: var(--transition-base);
            background: white;
        }
        
        .template-card:hover {
            border-color: var(--m5-accent);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .template-card.selected {
            border-color: var(--m5-accent);
            background: rgba(221, 65, 36, 0.02);
        }
        
        .template-preview {
            font-size: 2rem;
            text-align: center;
            margin-bottom: var(--space-md);
        }
        
        .template-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            margin-bottom: var(--space-sm);
            color: var(--m5-gray-900);
        }
        
        .template-description {
            font-size: var(--font-size-sm);
            color: var(--m5-gray-600);
            margin-bottom: var(--space-md);
            line-height: 1.4;
        }
        
        .template-features {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-xs);
        }
        
        .template-feature {
            background: var(--m5-gray-100);
            color: var(--m5-gray-700);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-xs);
            font-weight: 500;
        }
        
        /* Field Builder */
        .field-builder {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-2xl);
        }
        
        .field-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }
        
        .field-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-md);
            border: 1px solid var(--m5-gray-200);
            border-radius: var(--border-radius);
            background: white;
            transition: var(--transition-base);
        }
        
        .field-item:hover {
            border-color: var(--m5-accent);
            background: rgba(221, 65, 36, 0.02);
        }
        
        .field-item.active {
            border-color: var(--m5-accent);
            background: rgba(221, 65, 36, 0.05);
        }
        
        .field-info {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        
        .field-type-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--m5-gray-100);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--m5-gray-600);
        }
        
        .field-details h4 {
            font-size: var(--font-size-sm);
            font-weight: 600;
            margin: 0 0 var(--space-xs) 0;
            color: var(--m5-gray-900);
        }
        
        .field-details p {
            font-size: var(--font-size-xs);
            color: var(--m5-gray-600);
            margin: 0;
        }
        
        .field-config {
            border: 1px solid var(--m5-gray-200);
            border-radius: var(--border-radius-lg);
            background: white;
            min-height: 400px;
        }
        
        /* Flow Builder */
        .flow-builder {
            display: grid;
            grid-template-columns: 1fr 250px;
            gap: var(--space-xl);
        }
        
        .flow-canvas {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-xl);
            border: 2px dashed var(--m5-gray-300);
            border-radius: var(--border-radius-lg);
            background: var(--m5-gray-50);
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: white;
            border: 1px solid var(--m5-gray-200);
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 500px;
            box-shadow: var(--shadow-sm);
        }
        
        .flow-step-icon {
            font-size: 1.5rem;
            width: 40px;
            text-align: center;
        }
        
        .flow-step-content {
            flex: 1;
        }
        
        .flow-step-content h4 {
            font-size: var(--font-size-sm);
            font-weight: 600;
            margin: 0 0 var(--space-xs) 0;
        }
        
        .flow-step-content p {
            font-size: var(--font-size-xs);
            color: var(--m5-gray-600);
            margin: 0;
        }
        
        .flow-arrow {
            font-size: 1.5rem;
            color: var(--m5-gray-400);
        }
        
        .flow-sidebar {
            background: white;
            border: 1px solid var(--m5-gray-200);
            border-radius: var(--border-radius-lg);
            padding: var(--space-lg);
        }
        
        .component-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }
        
        .component-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm);
            border: 1px solid var(--m5-gray-200);
            border-radius: var(--border-radius);
            background: white;
            cursor: grab;
            font-size: var(--font-size-sm);
            transition: var(--transition-base);
        }
        
        .component-item:hover {
            border-color: var(--m5-accent);
            background: rgba(221, 65, 36, 0.02);
        }
        
        .component-item:active {
            cursor: grabbing;
        }
        
        /* Preview Container */
        .preview-container {
            display: flex;
            justify-content: center;
            padding: var(--space-xl) 0;
        }
        
        .preview-device {
            width: 100%;
            max-width: 800px;
            border: 1px solid var(--m5-gray-300);
            border-radius: var(--border-radius-lg);
            background: white;
            box-shadow: var(--shadow-lg);
        }
        
        .preview-toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-md) var(--space-lg);
            background: var(--m5-gray-50);
            border-bottom: 1px solid var(--m5-gray-200);
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        }
        
        .device-selector {
            display: flex;
            gap: var(--space-xs);
        }
        
        .device-btn {
            padding: var(--space-xs) var(--space-sm);
            border: 1px solid var(--m5-gray-300);
            background: white;
            color: var(--m5-gray-600);
            font-size: var(--font-size-xs);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition-base);
        }
        
        .device-btn:hover {
            border-color: var(--m5-accent);
            color: var(--m5-accent);
        }
        
        .device-btn.active {
            background: var(--m5-accent);
            color: white;
            border-color: var(--m5-accent);
        }
        
        .preview-content {
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .form-factor-selector {
            display: flex;
            gap: var(--space-sm);
            flex-wrap: wrap;
            justify-content: center;
        }
        
        /* Form Elements */
        .form-group {
            margin-bottom: var(--space-lg);
        }
        
        .form-label {
            display: block;
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--m5-gray-700);
            margin-bottom: var(--space-sm);
        }
        
        .form-input,
        .form-select {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--m5-gray-300);
            border-radius: var(--border-radius);
            font-size: var(--font-size-sm);
            background: white;
            transition: var(--transition-base);
        }
        
        .form-input:focus,
        .form-select:focus {
            border-color: var(--m5-accent);
            outline: none;
            box-shadow: 0 0 0 3px rgba(221, 65, 36, 0.1);
        }
        
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-size-sm);
            cursor: pointer;
        }
        
        .checkbox-item input {
            margin: 0;
        }
        
        /* Print Styles */
        @media print {
            .navbar,
            .sidebar,
            .mobile-nav,
            .btn,
            .dropdown {
                display: none !important;
            }
            
            .content {
                padding: 0;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
    </style>
</head>
<body>
    <div id="app" class="app">
        <!-- Navigation Bar -->
        <nav class="navbar">
            <div class="navbar-container">
                <a href="#dashboard" class="navbar-brand" data-page="dashboard">
                    <img src="img/Logo_M5M Light Web.png" alt="Mach Five Marketing" class="navbar-logo">
                </a>
                
                <nav class="navbar-nav">
                    <a href="#dashboard" class="nav-link active" data-page="dashboard">
                        <span class="material-symbols-outlined">dashboard</span>
                        <span>Dashboard</span>
                    </a>
                    <a href="#campaigns" class="nav-link" data-page="campaigns">
                        <span class="material-symbols-outlined">campaign</span>
                        <span>Campaigns</span>
                    </a>
                    <a href="#leads" class="nav-link" data-page="leads">
                        <span class="material-symbols-outlined">contacts</span>
                        <span>Lead Magnet</span>
                    </a>
                    <a href="#analytics" class="nav-link" data-page="analytics">
                        <span class="material-symbols-outlined">rocket_launch</span>
                        <span>Your Program</span>
                        <span class="notification-badge"></span>
                    </a>
                </nav>
                
                <div class="navbar-actions">
                    <div class="notification-dropdown">
                        <button class="btn btn-ghost" id="notificationBtn" onclick="app.toggleNotifications(event)">
                            <span class="material-symbols-outlined">notifications</span>
                            <span class="notification-indicator" id="notificationIndicator">3</span>
                        </button>
                        <div class="notification-menu" id="notificationMenu">
                            <div class="notification-header">
                                <h3>Notifications</h3>
                                <button class="btn btn-ghost btn-sm" onclick="app.clearAllNotifications()">Clear All</button>
                            </div>
                            <div class="notification-list" id="notificationList">
                                <div class="notification-item" data-id="1">
                                    <div class="notification-icon">
                                        <span class="material-symbols-outlined">task_alt</span>
                                    </div>
                                    <div class="notification-content">
                                        <h4>Deliverable Ready for Review</h4>
                                        <p>ACME Rentals Summer Promotion Ads</p>
                                        <span class="notification-time">Today, 10:30 AM</span>
                                    </div>
                                    <button class="notification-dismiss" onclick="app.dismissNotification(1)">
                                        <span class="material-symbols-outlined">close</span>
                                    </button>
                                </div>
                                <div class="notification-item" data-id="2">
                                    <div class="notification-icon">
                                        <span class="material-symbols-outlined">task_alt</span>
                                    </div>
                                    <div class="notification-content">
                                        <h4>Deliverable Ready for Review</h4>
                                        <p>August Property Showcase Content</p>
                                        <span class="notification-time">Yesterday, 3:45 PM</span>
                                    </div>
                                    <button class="notification-dismiss" onclick="app.dismissNotification(2)">
                                        <span class="material-symbols-outlined">close</span>
                                    </button>
                                </div>
                                <div class="notification-item" data-id="3">
                                    <div class="notification-icon">
                                        <span class="material-symbols-outlined">task_alt</span>
                                    </div>
                                    <div class="notification-content">
                                        <h4>Deliverable Ready for Review</h4>
                                        <p>Luxury Apartment Landing Page</p>
                                        <span class="notification-time">2 days ago</span>
                                    </div>
                                    <button class="notification-dismiss" onclick="app.dismissNotification(3)">
                                        <span class="material-symbols-outlined">close</span>
                                    </button>
                                </div>
                            </div>
                            <div class="notification-footer">
                                <a href="#analytics" class="notification-view-all" onclick="app.navigate('analytics'); app.closeNotifications();">
                                    View All Deliverables
                                    <span class="material-symbols-outlined">arrow_forward</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="user-dropdown">
                        <button class="user-dropdown-toggle" onclick="if(app) app.toggleUserDropdown(event)">
                            <span id="userName">Jay Hunter</span>
                            <span class="material-symbols-outlined">expand_more</span>
                        </button>
                        <div class="user-dropdown-menu" id="userDropdownMenu">
                            <a href="#add-users" class="dropdown-item" onclick="app.navigate('add-users'); app.toggleUserDropdown(event);">
                                <span class="material-symbols-outlined">person_add</span>
                                <span>Add Users</span>
                            </a>
                            <a href="#support" class="dropdown-item">
                                <span class="material-symbols-outlined">help</span>
                                <span>Support</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#logout" class="dropdown-item" onclick="if(app) app.logout()">
                                <span class="material-symbols-outlined">logout</span>
                                <span>Log Out</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Main Layout -->
        <div class="main">
            <!-- Sidebar (Desktop Only) -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-title">Resources</div>
                    <a href="#files" class="nav-link" data-page="files">
                        <span class="material-symbols-outlined">folder</span>
                        <span>Files & Assets</span>
                    </a>
                    <a href="#billing" class="nav-link" data-page="billing">
                        <span class="material-symbols-outlined">receipt</span>
                        <span>Billing</span>
                    </a>
                </div>
                
                <div class="sidebar-section">
                    <div class="sidebar-title">Quick Actions</div>
                    <a href="#new-campaign" class="nav-link">
                        <span class="material-symbols-outlined">add_circle</span>
                        <span>New Campaign</span>
                    </a>
                    <a href="#upload" class="nav-link" onclick="app.navigateToFilesWithUpload(event)">
                        <span class="material-symbols-outlined">upload</span>
                        <span>Upload Files</span>
                    </a>
                    <a href="#support" class="nav-link" data-page="support">
                        <span class="material-symbols-outlined">help</span>
                        <span>Get Support</span>
                    </a>
                </div>
                
                <div class="sidebar-section">
                    <div class="sidebar-title">Recent Activity</div>
                    <div class="text-small text-muted" style="padding: var(--space-sm);">
                        <p class="mb-2"> Campaign "Luxury Apartment Ads" launched</p>
                        <p class="mb-2"> 15 new leads captured</p>
                        <p class="mb-2"> Invoice #1234 paid</p>
                    </div>
                </div>
            </aside>
            
            <!-- Content Area -->
            <main class="content" id="content">
                <div class="content-container" id="view-container">
                    <!-- Dynamic content will be loaded here -->
                </div>
            </main>
        </div>
        
        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <a href="#dashboard" class="nav-link active" data-page="dashboard">
                <span class="material-symbols-outlined">dashboard</span>
                <span>Home</span>
            </a>
            <a href="#campaigns" class="nav-link" data-page="campaigns">
                <span class="material-symbols-outlined">campaign</span>
                <span>Campaigns</span>
            </a>
            <a href="#leads" class="nav-link" data-page="leads">
                <span class="material-symbols-outlined">contacts</span>
                <span>Leads</span>
            </a>
            <a href="#analytics" class="nav-link" data-page="analytics">
                <span class="material-symbols-outlined">rocket_launch</span>
                <span>Program</span>
            </a>
            <a href="#" class="nav-link" onclick="app.toggleMobileMenu()">
                <span class="material-symbols-outlined">menu</span>
                <span>More</span>
            </a>
        </nav>
        
        <!-- Mobile Menu Overlay -->
        <div id="mobileMenuOverlay" class="mobile-menu-overlay" style="display: none;">
            <div class="mobile-menu-backdrop" onclick="app.toggleMobileMenu()"></div>
            <div class="mobile-menu-content">
                <div class="mobile-menu-header">
                    <h3>Menu</h3>
                    <button class="btn btn-ghost" onclick="app.toggleMobileMenu()">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
                <div class="mobile-menu-body">
                    <div class="mobile-menu-section">
                        <div class="mobile-menu-title">Resources</div>
                        <a href="#files" class="mobile-menu-link" data-page="files" onclick="app.toggleMobileMenu()">
                            <span class="material-symbols-outlined">folder</span>
                            <span>Files & Assets</span>
                        </a>
                        <a href="#billing" class="mobile-menu-link" data-page="billing" onclick="app.toggleMobileMenu()">
                            <span class="material-symbols-outlined">receipt</span>
                            <span>Billing</span>
                        </a>
                    </div>
                    <div class="mobile-menu-section">
                        <div class="mobile-menu-title">Quick Actions</div>
                        <a href="#new-campaign" class="mobile-menu-link" onclick="app.toggleMobileMenu()">
                            <span class="material-symbols-outlined">add_circle</span>
                            <span>New Campaign</span>
                        </a>
                        <a href="#upload" class="mobile-menu-link" onclick="app.toggleMobileMenu()">
                            <span class="material-symbols-outlined">upload</span>
                            <span>Upload Files</span>
                        </a>
                        <a href="#support" class="mobile-menu-link" data-page="support" onclick="app.toggleMobileMenu()">
                            <span class="material-symbols-outlined">help</span>
                            <span>Get Support</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- File Modal -->
    <div id="fileModal" class="modal" style="display: none;">
        <div class="modal-backdrop" onclick="app.closeFileModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title" id="modalFileName">File Name</h2>
                    <p class="modal-subtitle" id="modalFileInfo">File info</p>
                </div>
                <button class="btn btn-ghost" onclick="app.closeFileModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="file-preview" id="filePreview">
                    <!-- Preview content will be inserted here -->
                </div>
                
                <div class="file-actions">
                    <button class="btn btn-primary" onclick="app.downloadFile()">
                        <span class="material-symbols-outlined">download</span>
                        Download
                    </button>
                    <button class="btn btn-secondary" onclick="app.viewFile()">
                        <span class="material-symbols-outlined">visibility</span>
                        View Full Size
                    </button>
                    <button class="btn btn-secondary" onclick="app.shareFile()">
                        <span class="material-symbols-outlined">share</span>
                        Share
                    </button>
                </div>
                
                <div class="file-details">
                    <h3>File Details</h3>
                    <div class="detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">Type</span>
                            <span class="detail-value" id="fileType">PDF Document</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Size</span>
                            <span class="detail-value" id="fileSize">2.4 MB</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Modified</span>
                            <span class="detail-value" id="fileModified">Yesterday at 3:45 PM</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Created</span>
                            <span class="detail-value" id="fileCreated">June 15, 2024</span>
                        </div>
                    </div>
                </div>
                
                <div class="file-comments">
                    <h3>Comments</h3>
                    <div class="comments-list">
                        <div class="comment">
                            <div class="comment-avatar">JD</div>
                            <div class="comment-content">
                                <div class="comment-header">
                                    <span class="comment-author">Jane Doe</span>
                                    <span class="comment-time">2 hours ago</span>
                                </div>
                                <p class="comment-text">Great work on this strategy document! I especially like the social media approach outlined in section 3.</p>
                            </div>
                        </div>
                        <div class="comment">
                            <div class="comment-avatar">MJ</div>
                            <div class="comment-content">
                                <div class="comment-header">
                                    <span class="comment-author">Mike Johnson</span>
                                    <span class="comment-time">Yesterday</span>
                                </div>
                                <p class="comment-text">Thanks for sharing. Can we schedule a meeting to discuss the budget allocations?</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="comment-form">
                        <textarea class="comment-input" placeholder="Add a comment..."></textarea>
                        <button class="btn btn-primary">Post Comment</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Invoice Modal -->
    <div id="invoiceModal" class="modal" style="display: none;">
        <div class="modal-backdrop" onclick="app.closeInvoiceModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2 class="modal-title" id="modalInvoiceNumber">Invoice #</h2>
                    <p class="modal-subtitle" id="modalInvoiceStatus">Status</p>
                </div>
                <button class="btn btn-ghost" onclick="app.closeInvoiceModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="invoice-preview">
                    <div class="invoice-header-info">
                        <div>
                            <h3>Mach Five Marketing</h3>
                            <p>123 Marketing Street<br>
                            Suite 100<br>
                            Marketing City, MC 12345<br>
                            Phone: (555) 123-4567</p>
                        </div>
                        <div class="text-right">
                            <h1 class="invoice-modal-number" id="invoiceDisplayNumber">INVOICE</h1>
                            <p><strong>Date:</strong> <span id="invoiceDate">July 1, 2024</span></p>
                            <p><strong>Due Date:</strong> <span id="invoiceDueDate">July 31, 2024</span></p>
                        </div>
                    </div>
                    
                    <div class="invoice-bill-to">
                        <h4>Bill To:</h4>
                        <p><strong>ABC Marketing Company</strong><br>
                        456 Business Ave<br>
                        Business City, BC 54321</p>
                    </div>
                    
                    <div class="invoice-items">
                        <table class="invoice-table">
                            <thead>
                                <tr>
                                    <th>Service</th>
                                    <th>Description</th>
                                    <th>Qty</th>
                                    <th>Rate</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody id="invoiceItems">
                                <tr>
                                    <td>Digital Marketing</td>
                                    <td>Monthly marketing services</td>
                                    <td>1</td>
                                    <td>$3,000.00</td>
                                    <td>$3,000.00</td>
                                </tr>
                                <tr>
                                    <td>SEO Services</td>
                                    <td>Search engine optimization</td>
                                    <td>1</td>
                                    <td>$750.00</td>
                                    <td>$750.00</td>
                                </tr>
                                <tr>
                                    <td>Content Creation</td>
                                    <td>Blog posts and social media</td>
                                    <td>1</td>
                                    <td>$500.00</td>
                                    <td>$500.00</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="4" class="text-right"><strong>Subtotal:</strong></td>
                                    <td><strong id="invoiceSubtotal">$4,250.00</strong></td>
                                </tr>
                                <tr>
                                    <td colspan="4" class="text-right"><strong>Tax (0%):</strong></td>
                                    <td><strong>$0.00</strong></td>
                                </tr>
                                <tr class="invoice-total">
                                    <td colspan="4" class="text-right"><strong>Total:</strong></td>
                                    <td><strong id="invoiceTotal">$4,250.00</strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    
                    <div class="invoice-notes">
                        <h4>Notes:</h4>
                        <p>Thank you for your business! Payment is due within 30 days.</p>
                    </div>
                </div>
                
                <div class="invoice-actions">
                    <button class="btn btn-primary" onclick="app.downloadInvoice()">
                        <span class="material-symbols-outlined">download</span>
                        Download PDF
                    </button>
                    <button class="btn btn-secondary" onclick="app.printInvoice()">
                        <span class="material-symbols-outlined">print</span>
                        Print
                    </button>
                    <button class="btn btn-secondary" onclick="app.emailInvoice()">
                        <span class="material-symbols-outlined">email</span>
                        Email Invoice
                    </button>
                    <button class="btn btn-primary" id="payInvoiceBtn" onclick="app.payInvoice()">
                        <span class="material-symbols-outlined">payment</span>
                        Pay Now
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Modern SPA Application
        class PortalApp {
            constructor() {
                this.currentPage = null;
                this.viewContainer = document.getElementById('view-container');
                this.chartInstances = {}; // Store chart instances for cleanup
                this.notifications = [
                    { id: 1, title: 'Deliverable Ready for Review', message: 'ACME Rentals Summer Promotion Ads', time: 'Today, 10:30 AM' },
                    { id: 2, title: 'Deliverable Ready for Review', message: 'August Property Showcase Content', time: 'Yesterday, 3:45 PM' },
                    { id: 3, title: 'Deliverable Ready for Review', message: 'Luxury Apartment Landing Page', time: '2 days ago' }
                ];
                this.init();
            }
            
            init() {
                // Set up navigation
                this.setupNavigation();
                
                // Set up routing
                this.setupRouting();
                
                // Set up global event delegation for dynamic buttons
                this.setupGlobalEventDelegation();
                
                // Load initial page
                const initialPage = window.location.hash.slice(1) || 'dashboard';
                this.navigate(initialPage);
                
                // Initialize user info
                this.loadUserInfo();
                
                // Initialize notification count
                this.updateNotificationCount();
            }
            
            setupNavigation() {
                // Handle all navigation links (including mobile menu)
                document.querySelectorAll('.nav-link[data-page], .mobile-menu-link[data-page], .navbar-brand[data-page]').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = link.dataset.page;
                        if (page) {
                            this.navigate(page);
                        }
                    });
                });
            }
            
            setupRouting() {
                // Handle browser back/forward
                window.addEventListener('popstate', () => {
                    const page = window.location.hash.slice(1) || 'dashboard';
                    this.navigate(page, false);
                });
            }
            
            setupGlobalEventDelegation() {
                // Handle clicks on dynamically loaded content
                document.addEventListener('click', (e) => {
                    // Check if clicked element or its parent is the config edit button
                    const configBtn = e.target.closest('#configEditBtn');
                    if (configBtn) {
                        console.log('Config edit button clicked via delegation');
                        e.preventDefault();
                        e.stopPropagation();
                        
                        // Try direct DOM manipulation as a test
                        const modal = document.getElementById('configurationModal');
                        console.log('Direct modal lookup:', modal);
                        if (modal) {
                            modal.style.display = 'flex';
                            document.body.style.overflow = 'hidden';
                            console.log('Modal should be visible now');
                        } else {
                            console.error('Modal not found in DOM');
                        }
                    }
                });
            }
            
            navigate(page, updateHistory = true) {
                // Update URL
                if (updateHistory) {
                    window.location.hash = page;
                }
                
                // Update active navigation
                this.updateActiveNav(page);
                
                // Load page content
                this.loadPage(page);
                
                this.currentPage = page;
            }
            
            navigateToFilesWithUpload(event) {
                event.preventDefault();
                this.navigate('files');
                // Wait for page to load then show upload modal
                setTimeout(() => {
                    this.showUploadModal();
                }, 300);
            }
            
            updateActiveNav(page) {
                document.querySelectorAll('.nav-link[data-page]').forEach(link => {
                    if (link.dataset.page === page) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            }
            
            loadPage(page) {
                // Clean up any existing charts before loading new page
                this.cleanupCharts();
                
                // Add leaving animation
                if (this.viewContainer.firstElementChild) {
                    this.viewContainer.firstElementChild.classList.add('view-leave');
                }
                
                // Load new content after animation
                setTimeout(() => {
                    const pageContent = this.pages[page] || this.pages['404'];
                    this.viewContainer.innerHTML = pageContent.render();
                    
                    // Initialize page-specific functionality
                    if (pageContent.onMount) {
                        setTimeout(() => pageContent.onMount(), 50);
                    }
                }, 200);
            }
            
            cleanupCharts() {
                // Destroy all chart instances
                Object.keys(this.chartInstances).forEach(key => {
                    if (this.chartInstances[key]) {
                        this.chartInstances[key].destroy();
                        delete this.chartInstances[key];
                    }
                });
            }
            
            loadUserInfo() {
                // In a real app, this would come from an API
                const user = {
                    name: 'Jay Hunter',
                    email: 'jay@acmerentals.com',
                    company: 'ACME Rentals'
                };
                
                document.getElementById('userName').textContent = user.name;
            }
            
            // File Modal Functions
            showFileModal(fileName, fileType) {
                const modal = document.getElementById('fileModal');
                const modalFileName = document.getElementById('modalFileName');
                const modalFileInfo = document.getElementById('modalFileInfo');
                const filePreview = document.getElementById('filePreview');
                
                // File metadata (in a real app, this would come from an API)
                const fileData = {
                    'Marketing_Strategy_2024.pdf': {
                        type: 'PDF Document',
                        size: '2.4 MB',
                        modified: 'Yesterday at 3:45 PM',
                        created: 'June 15, 2024'
                    },
                    'Summer_Campaign_Hero.jpg': {
                        type: 'JPEG Image',
                        size: '856 KB',
                        modified: '4 days ago at 10:30 AM',
                        created: 'July 1, 2024'
                    },
                    'Content_Calendar_July.docx': {
                        type: 'Word Document',
                        size: '124 KB',
                        modified: '1 week ago at 2:15 PM',
                        created: 'June 25, 2024'
                    },
                    'Product_Demo_Final.mp4': {
                        type: 'MP4 Video',
                        size: '45.2 MB',
                        modified: '2 weeks ago at 9:00 AM',
                        created: 'June 10, 2024'
                    },
                    'Campaign_Performance_Q2.xlsx': {
                        type: 'Excel Spreadsheet',
                        size: '1.8 MB',
                        modified: '5 days ago at 4:20 PM',
                        created: 'April 1, 2024'
                    }
                };
                
                if (fileType === 'folder') {
                    // For folders, show a different view
                    modalFileName.textContent = fileName || 'Folder';
                    modalFileInfo.textContent = 'Navigate into folder to view contents';
                    filePreview.innerHTML = '<div class="preview-icon"><span class="material-symbols-outlined">folder_open</span></div>';
                    // Hide file-specific sections
                    document.querySelector('.file-actions').style.display = 'none';
                    document.querySelector('.file-details').style.display = 'none';
                    document.querySelector('.file-comments').style.display = 'none';
                } else {
                    // For files
                    modalFileName.textContent = fileName;
                    const data = fileData[fileName] || { type: 'Unknown', size: 'Unknown', modified: 'Unknown', created: 'Unknown' };
                    modalFileInfo.textContent = `${data.type}  ${data.size}`;
                    
                    // Update details
                    document.getElementById('fileType').textContent = data.type;
                    document.getElementById('fileSize').textContent = data.size;
                    document.getElementById('fileModified').textContent = data.modified;
                    document.getElementById('fileCreated').textContent = data.created;
                    
                    // Show file-specific sections
                    document.querySelector('.file-actions').style.display = 'flex';
                    document.querySelector('.file-details').style.display = 'block';
                    document.querySelector('.file-comments').style.display = 'block';
                    
                    // Set preview based on file type
                    if (fileType === 'image') {
                        filePreview.innerHTML = `<img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='400' viewBox='0 0 600 400'%3E%3Crect width='600' height='400' fill='%23e0e0e0'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial, sans-serif' font-size='24' fill='%23666' text-anchor='middle' dy='.3em'%3EACME Rentals Hero Ad%3C/text%3E%3C/svg%3E" alt="${fileName}">`;
                    } else if (fileType === 'pdf') {
                        filePreview.innerHTML = '<div class="preview-icon"><span class="material-symbols-outlined">description</span><p class="text-muted mt-3">PDF Preview</p></div>';
                    } else if (fileType === 'doc') {
                        filePreview.innerHTML = '<div class="preview-icon"><span class="material-symbols-outlined">article</span><p class="text-muted mt-3">Document Preview</p></div>';
                    } else if (fileType === 'video') {
                        filePreview.innerHTML = '<div class="preview-icon"><span class="material-symbols-outlined">play_circle</span><p class="text-muted mt-3">Video Preview</p></div>';
                    } else if (fileType === 'spreadsheet') {
                        filePreview.innerHTML = '<div class="preview-icon"><span class="material-symbols-outlined">table_chart</span><p class="text-muted mt-3">Spreadsheet Preview</p></div>';
                    }
                }
                
                // Show modal
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
            
            closeFileModal() {
                const modal = document.getElementById('fileModal');
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }

            showMessageModal() {
                const modal = document.getElementById('messageModal');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                
                // Clear previous values
                document.getElementById('messageSubject').value = '';
                document.getElementById('messageContent').value = '';
                
                // Focus on subject field
                setTimeout(() => {
                    document.getElementById('messageSubject').focus();
                }, 100);
            }

            closeMessageModal() {
                const modal = document.getElementById('messageModal');
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }

            async sendMessage() {
                const subject = document.getElementById('messageSubject').value.trim();
                const content = document.getElementById('messageContent').value.trim();
                
                if (!subject || !content) {
                    this.showNotification('Please fill in both subject and message', 'error');
                    return;
                }
                
                // Simulate sending message
                this.showNotification('Sending message...', 'info');
                
                // In a real implementation, this would make an API call
                setTimeout(() => {
                    this.closeMessageModal();
                    this.showNotification('Message sent successfully!', 'success');
                }, 1000);
            }

            async handleAddUser(event) {
                event.preventDefault();
                
                // Get form data
                const formData = new FormData(event.target);
                const firstName = formData.get('firstName').trim();
                const lastName = formData.get('lastName').trim();
                const email = formData.get('email').trim();
                const role = formData.get('role');
                const permissions = formData.getAll('permissions');
                
                // Basic validation
                if (!firstName || !lastName || !email || !role) {
                    this.showNotification('Please fill in all required fields', 'error');
                    return;
                }
                
                if (!email.includes('@')) {
                    this.showNotification('Please enter a valid email address', 'error');
                    return;
                }
                
                if (permissions.length === 0) {
                    this.showNotification('Please select at least one permission', 'error');
                    return;
                }
                
                // Show loading state
                const submitButton = event.target.querySelector('button[type="submit"]');
                const originalText = submitButton.innerHTML;
                submitButton.innerHTML = '<span class="material-symbols-outlined">hourglass_empty</span> Creating User...';
                submitButton.disabled = true;
                
                try {
                    // In a real implementation, this would make an API call to create the user
                    // For now, we'll simulate the API call
                    const userData = {
                        firstName,
                        lastName,
                        email,
                        role,
                        permissions,
                        created: new Date().toISOString()
                    };
                    
                    console.log('Creating user:', userData);
                    
                    // Simulate API delay
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    // Show success message and navigate back
                    this.showNotification(`User ${firstName} ${lastName} created successfully!`, 'success');
                    
                    // Reset form
                    event.target.reset();
                    
                    // Navigate to dashboard after short delay
                    setTimeout(() => {
                        this.navigate('dashboard');
                    }, 2000);
                    
                } catch (error) {
                    console.error('Error creating user:', error);
                    this.showNotification('Failed to create user. Please try again.', 'error');
                } finally {
                    // Restore button state
                    submitButton.innerHTML = originalText;
                    submitButton.disabled = false;
                }
            }

            showNotification(message, type = 'info') {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                    <span class="material-symbols-outlined">
                        ${type === 'success' ? 'check_circle' : type === 'error' ? 'error' : 'info'}
                    </span>
                    <span>${message}</span>
                `;
                
                // Add to body
                document.body.appendChild(notification);
                
                // Trigger animation
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);
                
                // Remove after delay
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }
            
            showTicketModal() {
                const modal = document.getElementById('ticketModal');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                
                // Clear previous values
                document.getElementById('ticketSubject').value = '';
                document.getElementById('ticketCategory').value = '';
                document.getElementById('ticketPriority').value = 'medium';
                document.getElementById('ticketDescription').value = '';
                
                // Focus on subject field
                setTimeout(() => {
                    document.getElementById('ticketSubject').focus();
                }, 100);
            }

            closeTicketModal() {
                const modal = document.getElementById('ticketModal');
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }

            async submitTicket() {
                const subject = document.getElementById('ticketSubject').value.trim();
                const category = document.getElementById('ticketCategory').value;
                const priority = document.getElementById('ticketPriority').value;
                const description = document.getElementById('ticketDescription').value.trim();
                
                if (!subject || !category || !description) {
                    this.showNotification('Please fill in all required fields', 'error');
                    return;
                }
                
                // Simulate submitting ticket
                this.showNotification('Submitting ticket...', 'info');
                
                // In a real implementation, this would make an API call
                setTimeout(() => {
                    this.closeTicketModal();
                    this.showNotification('Support ticket created successfully! Ticket #' + Math.floor(Math.random() * 10000 + 1000), 'success');
                }, 1000);
            }
            
            downloadFile() {
                // In a real app, this would trigger a download
                alert('Download started...');
            }
            
            viewFile() {
                // In a real app, this would open the file in a new tab
                alert('Opening file in new tab...');
            }
            
            shareFile() {
                // In a real app, this would open a share dialog
                alert('Share link copied to clipboard!');
            }
            
            // File search functionality
            searchFiles(searchTerm) {
                const fileItems = document.querySelectorAll('.file-item');
                const lowerSearch = searchTerm.toLowerCase();
                
                fileItems.forEach(item => {
                    const fileName = item.querySelector('.file-name').textContent.toLowerCase();
                    if (fileName.includes(lowerSearch)) {
                        item.style.display = '';
                    } else {
                        item.style.display = 'none';
                    }
                });
                
                // Update file count
                const visibleItems = document.querySelectorAll('.file-item:not([style*="display: none"])').length;
                const statusText = document.querySelector('.file-status .text-muted');
                if (statusText) {
                    if (searchTerm) {
                        statusText.textContent = `${visibleItems} items found  52.3 MB used of 10 GB`;
                    } else {
                        statusText.textContent = '8 items  52.3 MB used of 10 GB';
                    }
                }
            }
            
            // File view switching (grid/list)
            setFileView(viewType) {
                const fileContainer = document.querySelector('.file-grid') || document.querySelector('.file-list');
                const listBtn = document.getElementById('listViewBtn');
                const gridBtn = document.getElementById('gridViewBtn');
                
                if (!fileContainer) return;
                
                if (viewType === 'list') {
                    // Switch to list view
                    fileContainer.className = 'file-list';
                    listBtn.classList.add('active');
                    gridBtn.classList.remove('active');
                    
                    // Update file items structure for list view
                    const fileItems = fileContainer.querySelectorAll('.file-item');
                    fileItems.forEach(item => {
                        const fileName = item.querySelector('.file-name');
                        const fileMeta = item.querySelector('.file-meta');
                        const fileIcon = item.querySelector('.file-icon');
                        
                        // Wrap name and meta in a container if not already
                        if (!item.querySelector('.file-info')) {
                            const fileInfo = document.createElement('div');
                            fileInfo.className = 'file-info';
                            fileInfo.appendChild(fileName.cloneNode(true));
                            fileInfo.appendChild(fileMeta.cloneNode(true));
                            
                            // Clear and restructure
                            item.innerHTML = '';
                            item.appendChild(fileIcon);
                            item.appendChild(fileInfo);
                            
                            // Preserve click handler
                            const isFolder = fileIcon.querySelector('.material-symbols-outlined').textContent === 'folder';
                            const name = fileName.textContent;
                            const type = isFolder ? 'folder' : 
                                        name.endsWith('.pdf') ? 'pdf' :
                                        name.endsWith('.jpg') ? 'image' :
                                        name.endsWith('.docx') ? 'doc' :
                                        name.endsWith('.mp4') ? 'video' :
                                        name.endsWith('.xlsx') ? 'spreadsheet' : 'file';
                            
                            item.onclick = () => this.showFileModal(name, type);
                        }
                    });
                } else {
                    // Switch to grid view
                    fileContainer.className = 'file-grid';
                    gridBtn.classList.add('active');
                    listBtn.classList.remove('active');
                    
                    // Restore original grid structure
                    const fileItems = fileContainer.querySelectorAll('.file-item');
                    fileItems.forEach(item => {
                        const fileInfo = item.querySelector('.file-info');
                        if (fileInfo) {
                            const fileName = fileInfo.querySelector('.file-name');
                            const fileMeta = fileInfo.querySelector('.file-meta');
                            const fileIcon = item.querySelector('.file-icon');
                            
                            // Restore grid structure
                            item.innerHTML = '';
                            item.appendChild(fileIcon);
                            item.appendChild(fileName);
                            item.appendChild(fileMeta);
                            
                            // Preserve click handler
                            const isFolder = fileIcon.querySelector('.material-symbols-outlined').textContent === 'folder';
                            const name = fileName.textContent;
                            const type = isFolder ? 'folder' : 
                                        name.endsWith('.pdf') ? 'pdf' :
                                        name.endsWith('.jpg') ? 'image' :
                                        name.endsWith('.docx') ? 'doc' :
                                        name.endsWith('.mp4') ? 'video' :
                                        name.endsWith('.xlsx') ? 'spreadsheet' : 'file';
                            
                            item.onclick = () => this.showFileModal(name, type);
                        }
                    });
                }
            }
            
            // Invoice Modal Functions
            showInvoiceModal(invoiceNumber) {
                const modal = document.getElementById('invoiceModal');
                const modalInvoiceNumber = document.getElementById('modalInvoiceNumber');
                const modalInvoiceStatus = document.getElementById('modalInvoiceStatus');
                const invoiceDisplayNumber = document.getElementById('invoiceDisplayNumber');
                const payBtn = document.getElementById('payInvoiceBtn');
                
                // Invoice data (in a real app, this would come from an API)
                const invoiceData = {
                    'INV-2024-008': {
                        status: 'Pending',
                        date: 'August 1, 2024',
                        dueDate: 'August 31, 2024',
                        amount: '$4,250.00'
                    },
                    'INV-2024-007': {
                        status: 'Paid',
                        date: 'July 1, 2024',
                        dueDate: 'July 31, 2024',
                        amount: '$4,250.00'
                    },
                    'INV-2024-006': {
                        status: 'Paid',
                        date: 'June 1, 2024',
                        dueDate: 'June 30, 2024',
                        amount: '$3,750.00'
                    },
                    'INV-2024-005': {
                        status: 'Paid',
                        date: 'May 1, 2024',
                        dueDate: 'May 31, 2024',
                        amount: '$3,750.00'
                    },
                    'INV-2024-004': {
                        status: 'Paid',
                        date: 'April 1, 2024',
                        dueDate: 'April 30, 2024',
                        amount: '$3,500.00'
                    },
                    'INV-2024-003': {
                        status: 'Paid',
                        date: 'March 1, 2024',
                        dueDate: 'March 31, 2024',
                        amount: '$3,500.00'
                    }
                };
                
                const data = invoiceData[invoiceNumber] || {};
                
                // Update modal content
                modalInvoiceNumber.textContent = invoiceNumber;
                modalInvoiceStatus.textContent = data.status || 'Unknown';
                modalInvoiceStatus.className = 'modal-subtitle';
                
                if (data.status === 'Pending') {
                    modalInvoiceStatus.style.color = 'var(--m5-warning)';
                    payBtn.style.display = 'inline-flex';
                } else if (data.status === 'Paid') {
                    modalInvoiceStatus.style.color = 'var(--m5-success)';
                    payBtn.style.display = 'none';
                }
                
                invoiceDisplayNumber.textContent = invoiceNumber;
                document.getElementById('invoiceDate').textContent = data.date;
                document.getElementById('invoiceDueDate').textContent = data.dueDate;
                document.getElementById('invoiceSubtotal').textContent = data.amount;
                document.getElementById('invoiceTotal').textContent = data.amount;
                
                // Show modal
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
            
            closeInvoiceModal() {
                const modal = document.getElementById('invoiceModal');
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }
            
            downloadInvoice(invoiceNumber) {
                // In a real app, this would trigger a download
                alert(`Downloading ${invoiceNumber || 'invoice'}...`);
            }
            
            printInvoice() {
                // In a real app, this would open print dialog
                window.print();
            }
            
            emailInvoice() {
                // In a real app, this would send email
                alert('Invoice sent to your email address!');
            }
            
            payInvoice(invoiceNumber) {
                // In a real app, this would open payment gateway
                alert(`Redirecting to payment gateway for ${invoiceNumber || 'invoice'}...`);
            }
            
            // Widget Configuration Methods
            currentStep = 1;
            totalSteps = 5;
            
            showWidgetConfig() {
                const popup = document.getElementById('widgetConfigPopup');
                popup.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                this.currentStep = 1;
                this.updateStepDisplay();
            }
            
            closeWidgetConfig() {
                const popup = document.getElementById('widgetConfigPopup');
                popup.style.display = 'none';
                document.body.style.overflow = '';
            }
            
            nextStep() {
                if (this.currentStep < this.totalSteps) {
                    // Mark current step as completed
                    const currentStepEl = document.querySelector(`.step[data-step="${this.currentStep}"]`);
                    currentStepEl.classList.add('completed');
                    
                    this.currentStep++;
                    this.updateStepDisplay();
                }
            }
            
            previousStep() {
                if (this.currentStep > 1) {
                    this.currentStep--;
                    this.updateStepDisplay();
                }
            }
            
            updateStepDisplay() {
                // Update step indicators
                document.querySelectorAll('.step').forEach(step => {
                    const stepNum = parseInt(step.dataset.step);
                    step.classList.remove('active');
                    if (stepNum === this.currentStep) {
                        step.classList.add('active');
                    }
                });
                
                // Update step panels
                document.querySelectorAll('.step-panel').forEach(panel => {
                    panel.classList.remove('active');
                });
                document.querySelector(`.step-panel[data-panel="${this.currentStep}"]`).classList.add('active');
                
                // Update navigation buttons
                const prevBtn = document.getElementById('prevStepBtn');
                const nextBtn = document.getElementById('nextStepBtn');
                const finishBtn = document.getElementById('finishBtn');
                
                prevBtn.style.display = this.currentStep === 1 ? 'none' : 'flex';
                
                if (this.currentStep === this.totalSteps) {
                    nextBtn.style.display = 'none';
                    finishBtn.style.display = 'flex';
                    this.updateReviewSummary();
                } else {
                    nextBtn.style.display = 'flex';
                    finishBtn.style.display = 'none';
                }
            }
            
            updateReviewSummary() {
                // Update review summary with selected values
                const widgetType = document.querySelector('input[name="widgetType"]:checked').value;
                const primaryColor = document.getElementById('widgetPrimaryColor').value;
                const selectedFields = Array.from(document.querySelectorAll('.field-selector input[type="checkbox"]:checked'))
                    .map(cb => cb.parentElement.querySelector('span').textContent.replace(' (Required)', ''))
                    .join(', ');
                const trigger = document.querySelector('.form-group select').value;
                
                document.getElementById('reviewType').textContent = this.getWidgetTypeLabel(widgetType);
                document.getElementById('reviewColor').textContent = primaryColor;
                document.getElementById('reviewFields').textContent = selectedFields;
                document.getElementById('reviewTrigger').textContent = trigger;
                
                // Update code preview
                this.updateWidgetCode(widgetType, primaryColor, selectedFields, trigger);
            }
            
            getWidgetTypeLabel(type) {
                const labels = {
                    'popup': 'Popup Form',
                    'slide-in': 'Slide-in Panel',
                    'embedded': 'Embedded Form',
                    'floating': 'Floating Button'
                };
                return labels[type] || type;
            }
            
            updateWidgetCode(type, color, fields, trigger) {
                const code = `<!-- Mach Five Lead Magnet Widget -->
<script src="https://portal.machfivemarketing.com/widget.js"><\/script>
<script>
  MachFiveWidget.init({
    type: '${type}',
    primaryColor: '${color}',
    fields: ${JSON.stringify(fields.split(', '))},
    trigger: '${trigger}',
    apiKey: 'YOUR_API_KEY_HERE'
  });
<\/script>`;
                document.getElementById('widgetCode').textContent = code;
            }
            
            copyWidgetCode() {
                const code = document.getElementById('widgetCode').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    // Show success message
                    const btn = event.target.closest('button');
                    const originalText = btn.innerHTML;
                    btn.innerHTML = '<span class="material-symbols-outlined">check</span> Copied!';
                    btn.classList.add('btn-success');
                    
                    setTimeout(() => {
                        btn.innerHTML = originalText;
                        btn.classList.remove('btn-success');
                    }, 2000);
                });
            }
            
            finishWidgetConfig() {
                // In a real app, this would save the configuration
                alert('Widget configuration saved! The installation code has been generated.');
                this.closeWidgetConfig();
            }
            
            // Mobile Menu Toggle
            toggleMobileMenu() {
                const overlay = document.getElementById('mobileMenuOverlay');
                if (overlay.style.display === 'none' || !overlay.style.display) {
                    overlay.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                } else {
                    overlay.style.display = 'none';
                    document.body.style.overflow = '';
                }
            }
            
            // User Dropdown Methods
            toggleUserDropdown(event) {
                event.stopPropagation();
                const dropdown = document.getElementById('userDropdownMenu');
                dropdown.classList.toggle('show');
                
                // Close dropdown when clicking outside
                if (dropdown.classList.contains('show')) {
                    // Add event listener to document
                    document.addEventListener('click', this.handleOutsideClick);
                } else {
                    // Remove event listener when closing
                    document.removeEventListener('click', this.handleOutsideClick);
                }
            }
            
            handleOutsideClick = (e) => {
                const dropdown = document.querySelector('.user-dropdown');
                const dropdownMenu = document.getElementById('userDropdownMenu');
                
                // Check if click is outside the dropdown
                if (!dropdown.contains(e.target)) {
                    dropdownMenu.classList.remove('show');
                    document.removeEventListener('click', this.handleOutsideClick);
                }
            }
            
            logout() {
                // In a real app, this would handle logout
                if (confirm('Are you sure you want to log out?')) {
                    alert('Logging out...');
                    // window.location.href = '/logout';
                }
            }
            
            // Notification Methods
            toggleNotifications(event) {
                event.stopPropagation();
                const menu = document.getElementById('notificationMenu');
                const isShowing = menu.classList.contains('show');
                
                if (!isShowing) {
                    menu.classList.add('show');
                    // Add click outside listener
                    document.addEventListener('click', this.handleNotificationOutsideClick);
                } else {
                    this.closeNotifications();
                }
            }
            
            closeNotifications() {
                const menu = document.getElementById('notificationMenu');
                menu.classList.remove('show');
                document.removeEventListener('click', this.handleNotificationOutsideClick);
            }
            
            handleNotificationOutsideClick = (e) => {
                const dropdown = document.querySelector('.notification-dropdown');
                if (!dropdown.contains(e.target)) {
                    this.closeNotifications();
                }
            }
            
            dismissNotification(id) {
                // Remove from notifications array
                this.notifications = this.notifications.filter(n => n.id !== id);
                
                // Remove from DOM
                const item = document.querySelector(`.notification-item[data-id="${id}"]`);
                if (item) {
                    item.style.animation = 'fadeOut 0.3s ease-out';
                    setTimeout(() => {
                        item.remove();
                        this.updateNotificationCount();
                    }, 300);
                }
            }
            
            clearAllNotifications() {
                // Clear all notifications
                this.notifications = [];
                
                // Update UI
                const list = document.getElementById('notificationList');
                list.innerHTML = `
                    <div class="notification-empty">
                        <span class="material-symbols-outlined">notifications_none</span>
                        <p>No new notifications</p>
                    </div>
                `;
                
                this.updateNotificationCount();
            }
            
            updateNotificationCount() {
                const indicator = document.getElementById('notificationIndicator');
                const badge = document.querySelector('.notification-badge');
                
                if (this.notifications.length > 0) {
                    indicator.textContent = this.notifications.length;
                    indicator.classList.remove('hidden');
                    if (badge) {
                        badge.style.display = 'flex';
                    }
                } else {
                    indicator.classList.add('hidden');
                    if (badge) {
                        badge.style.display = 'none';
                    }
                }
            }
            
            // Configuration Modal Methods
            showConfigurationModal() {
                console.log('showConfigurationModal called');
                console.log('window.app:', window.app);
                console.log('this:', this);
                
                // Try multiple ways to find the modal
                let modal = document.getElementById('configurationModal');
                console.log('Modal by getElementById:', modal);
                
                if (!modal) {
                    modal = document.querySelector('#configurationModal');
                    console.log('Modal by querySelector:', modal);
                }
                
                if (!modal) {
                    console.error('Configuration modal not found');
                    console.log('All elements with popup-overlay class:', document.querySelectorAll('.popup-overlay'));
                    return;
                }
                
                console.log('Modal element:', modal);
                console.log('Current display:', modal.style.display);
                console.log('Current classList:', modal.classList.toString());
                
                // Remove display none and add flex
                modal.style.removeProperty('display');
                modal.style.display = 'flex';
                
                console.log('After setting display:', modal.style.display);
                console.log('Computed style:', window.getComputedStyle(modal).display);
                
                document.body.style.overflow = 'hidden';
            }
            
            closeConfigurationModal() {
                const modal = document.getElementById('configurationModal');
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }
            
            saveConfiguration() {
                // Get all the form values
                const config = {
                    domain: document.getElementById('configDomain').value,
                    additionalDomains: document.getElementById('configAdditionalDomains').value,
                    ga4: document.getElementById('configGA4').value,
                    gtm: document.getElementById('configGTM').value,
                    fbPixel: document.getElementById('configFBPixel').value,
                    googleAds: document.getElementById('configGoogleAds').value,
                    metaBusiness: document.getElementById('configMetaBusiness').value,
                    metaAds: document.getElementById('configMetaAds').value,
                    crmWebhook: document.getElementById('configCRMWebhook').value,
                    notificationEmail: document.getElementById('configNotificationEmail').value,
                    apiKey: document.getElementById('configAPIKey').value,
                    businessName: document.getElementById('configBusinessName').value,
                    industry: document.getElementById('configIndustry').value,
                    markets: document.getElementById('configMarkets').value
                };
                
                // In a real app, this would save to the backend
                console.log('Saving configuration:', config);
                
                // Show success message
                alert('Configuration settings have been saved successfully!');
                this.closeConfigurationModal();
            }
            
            testConfiguration() {
                // Simulate testing the configuration
                const tests = [
                    { name: 'Domain Connectivity', status: 'pass' },
                    { name: 'GA4 Tracking', status: 'pass' },
                    { name: 'GTM Container', status: 'pass' },
                    { name: 'Facebook Pixel', status: 'pass' },
                    { name: 'API Connection', status: 'pass' }
                ];
                
                let message = 'Configuration Test Results:\\n\\n';
                tests.forEach(test => {
                    message += `${test.status === 'pass' ? '' : ''} ${test.name}\\n`;
                });
                
                alert(message + '\\nAll tests passed successfully!');
            }
            
            regenerateAPIKey() {
                if (confirm('Are you sure you want to regenerate your API key? This will invalidate the current key.')) {
                    // Generate a new mock API key
                    const newKey = 'pk_live_' + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
                    document.getElementById('configAPIKey').value = newKey;
                    alert('New API key generated! Make sure to update any integrations using the old key.');
                }
            }
            
            // Deliverable Review Methods
            showDeliverableReview(title, type) {
                const modal = document.getElementById('deliverableReviewModal');
                document.getElementById('deliverableTitle').textContent = title;
                
                // Set deliverable details
                const typeMap = {
                    'ad-creative': 'Ad Creative',
                    'content-calendar': 'Content Strategy',
                    'landing-page': 'Web Design'
                };
                document.getElementById('deliverableType').textContent = typeMap[type] || type;
                
                const dateMap = {
                    'ad-creative': 'Today, 10:30 AM',
                    'content-calendar': 'Yesterday, 3:45 PM',
                    'landing-page': '2 days ago'
                };
                document.getElementById('deliverableDate').textContent = dateMap[type] || 'Unknown';
                
                // Set preview content based on type
                const previewElement = document.getElementById('deliverablePreview');
                if (type === 'ad-creative') {
                    previewElement.innerHTML = `
                        <div>
                            <span class="material-symbols-outlined" style="font-size: 64px; color: var(--m5-gray-500);">image</span>
                            <p class="text-muted" style="margin-top: var(--space-md);">ACME Rentals Promotion Ads</p>
                            <p class="text-small text-muted">3 property showcase ads + 2 video tours</p>
                        </div>
                    `;
                } else if (type === 'content-calendar') {
                    previewElement.innerHTML = `
                        <div>
                            <span class="material-symbols-outlined" style="font-size: 64px; color: var(--m5-gray-500);">calendar_month</span>
                            <p class="text-muted" style="margin-top: var(--space-md);">July 2024 Content Calendar</p>
                            <p class="text-small text-muted">28 posts scheduled across 4 platforms</p>
                        </div>
                    `;
                } else if (type === 'landing-page') {
                    previewElement.innerHTML = `
                        <div>
                            <span class="material-symbols-outlined" style="font-size: 64px; color: var(--m5-gray-500);">web</span>
                            <p class="text-muted" style="margin-top: var(--space-md);">Luxury Apartment Landing Page</p>
                            <p class="text-small text-muted">Mobile responsive with virtual tour integration</p>
                        </div>
                    `;
                }
                
                // Show modal
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
            
            closeDeliverableReview() {
                const modal = document.getElementById('deliverableReviewModal');
                modal.style.display = 'none';
                document.body.style.overflow = '';
                document.getElementById('feedbackText').value = '';
            }
            
            approveDeliverable() {
                const title = document.getElementById('deliverableTitle').textContent;
                alert(`"${title}" has been approved! The team will be notified.`);
                this.closeDeliverableReview();
                // In a real app, this would update the deliverable status and refresh the list
            }
            
            requestChanges() {
                const feedback = document.getElementById('feedbackText').value;
                if (!feedback.trim()) {
                    alert('Please provide feedback before requesting changes.');
                    return;
                }
                const title = document.getElementById('deliverableTitle').textContent;
                alert(`Changes requested for "${title}". Your feedback has been sent to the team.`);
                this.closeDeliverableReview();
                // In a real app, this would send the feedback and update the status
            }
            
            // File Upload Methods
            uploadFiles = [];
            selectedFolder = '/';
            
            showUploadModal() {
                const modal = document.getElementById('uploadModal');
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                this.uploadFiles = [];
                this.selectedFolder = '/';
                this.updateUploadSummary();
                this.setupDragAndDrop();
            }
            
            closeUploadModal() {
                const modal = document.getElementById('uploadModal');
                modal.style.display = 'none';
                document.body.style.overflow = '';
                this.uploadFiles = [];
                document.getElementById('uploadFileList').innerHTML = '';
                document.getElementById('uploadFileList').style.display = 'none';
                document.getElementById('uploadDropzone').style.display = 'block';
                document.getElementById('fileUploadInput').value = '';
            }
            
            setupDragAndDrop() {
                const dropzone = document.getElementById('uploadDropzone');
                
                // Prevent default drag behaviors
                ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                    dropzone.addEventListener(eventName, preventDefaults, false);
                    document.body.addEventListener(eventName, preventDefaults, false);
                });
                
                function preventDefaults(e) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                // Highlight drop zone when item is dragged over it
                ['dragenter', 'dragover'].forEach(eventName => {
                    dropzone.addEventListener(eventName, highlight, false);
                });
                
                ['dragleave', 'drop'].forEach(eventName => {
                    dropzone.addEventListener(eventName, unhighlight, false);
                });
                
                function highlight(e) {
                    dropzone.classList.add('dragover');
                }
                
                function unhighlight(e) {
                    dropzone.classList.remove('dragover');
                }
                
                // Handle dropped files
                dropzone.addEventListener('drop', (e) => {
                    const dt = e.dataTransfer;
                    const files = dt.files;
                    this.handleFiles(files);
                });
            }
            
            handleFileSelect(event) {
                const files = event.target.files;
                this.handleFiles(files);
            }
            
            handleFiles(files) {
                ([...files]).forEach(file => {
                    // Check if file is already added
                    if (!this.uploadFiles.find(f => f.name === file.name)) {
                        // Check file size (100MB limit)
                        if (file.size > 100 * 1024 * 1024) {
                            alert(`File "${file.name}" exceeds the 100MB size limit.`);
                            return;
                        }
                        this.uploadFiles.push(file);
                    }
                });
                
                this.updateFileList();
                this.updateUploadSummary();
            }
            
            updateFileList() {
                const fileList = document.getElementById('uploadFileList');
                const dropzone = document.getElementById('uploadDropzone');
                
                if (this.uploadFiles.length === 0) {
                    fileList.style.display = 'none';
                    dropzone.style.display = 'block';
                    return;
                }
                
                dropzone.style.display = 'none';
                fileList.style.display = 'flex';
                
                fileList.innerHTML = this.uploadFiles.map((file, index) => `
                    <div class="upload-file-item">
                        <span class="material-symbols-outlined upload-file-icon">${this.getFileIcon(file.name)}</span>
                        <div class="upload-file-info">
                            <div class="upload-file-name">${file.name}</div>
                            <div class="upload-file-size">${this.formatFileSize(file.size)}</div>
                        </div>
                        <span class="material-symbols-outlined upload-file-remove" onclick="app.removeFile(${index})">close</span>
                    </div>
                `).join('');
            }
            
            removeFile(index) {
                this.uploadFiles.splice(index, 1);
                this.updateFileList();
                this.updateUploadSummary();
            }
            
            getFileIcon(filename) {
                const ext = filename.split('.').pop().toLowerCase();
                const iconMap = {
                    pdf: 'description',
                    doc: 'article',
                    docx: 'article',
                    xls: 'table_chart',
                    xlsx: 'table_chart',
                    jpg: 'image',
                    jpeg: 'image',
                    png: 'image',
                    gif: 'image',
                    mp4: 'movie',
                    mov: 'movie',
                    zip: 'folder_zip',
                    rar: 'folder_zip'
                };
                return iconMap[ext] || 'insert_drive_file';
            }
            
            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            selectFolder(element, path) {
                // Remove selected class from all folders
                document.querySelectorAll('.folder-item').forEach(item => {
                    item.classList.remove('selected');
                });
                
                // Add selected class to clicked folder
                element.classList.add('selected');
                
                // Update selected folder
                this.selectedFolder = path;
                
                // Update destination display
                const folderName = element.querySelector('.folder-name').textContent;
                document.getElementById('uploadDestination').textContent = path === '/' ? '/Root' : path;
            }
            
            updateUploadSummary() {
                const fileCount = this.uploadFiles.length;
                const totalSize = this.uploadFiles.reduce((sum, file) => sum + file.size, 0);
                
                document.getElementById('uploadFileCount').textContent = fileCount;
                document.getElementById('uploadTotalSize').textContent = this.formatFileSize(totalSize);
                
                // Enable/disable upload button
                const uploadButton = document.getElementById('uploadButton');
                uploadButton.disabled = fileCount === 0;
            }
            
            startUpload() {
                if (this.uploadFiles.length === 0) return;
                
                const progressBar = document.getElementById('uploadProgressBar');
                const progressContainer = document.getElementById('uploadProgress');
                const uploadButton = document.getElementById('uploadButton');
                
                // Show progress bar
                progressContainer.style.display = 'block';
                uploadButton.disabled = true;
                
                // Simulate upload progress
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 10;
                    progressBar.style.width = progress + '%';
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        setTimeout(() => {
                            alert(`Successfully uploaded ${this.uploadFiles.length} file(s) to ${this.selectedFolder}`);
                            this.closeUploadModal();
                            // In a real app, refresh the file list
                        }, 500);
                    }
                }, 200);
            }
            
            // Lead Magnet Configuration Methods
            switchConfigTab(tabName) {
                // Remove active class from all tabs and content
                document.querySelectorAll('.config-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.config-tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Add active class to selected tab and content
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
                document.querySelector(`[data-content="${tabName}"]`).classList.add('active');
            }
            
            addField(fieldType) {
                console.log(`Adding field of type: ${fieldType}`);
                
                // Show field configuration
                const configContent = document.getElementById('fieldConfigContent');
                if (configContent) {
                    configContent.innerHTML = `
                        <div class="form-group">
                            <label class="form-label">Field Label</label>
                            <input type="text" class="form-input" placeholder="Enter field label" value="${this.getDefaultLabel(fieldType)}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Field Name</label>
                            <input type="text" class="form-input" placeholder="Enter field name" value="${fieldType}_${Date.now()}">
                        </div>
                        <div class="form-group">
                            <label class="checkbox-item">
                                <input type="checkbox" ${fieldType === 'email' || fieldType === 'phone' ? 'checked' : ''}>
                                Required Field
                            </label>
                        </div>
                        ${this.getFieldSpecificConfig(fieldType)}
                        <div class="form-actions">
                            <button class="btn btn-secondary btn-sm">Cancel</button>
                            <button class="btn btn-primary btn-sm">Add Field</button>
                        </div>
                    `;
                }
            }
            
            getDefaultLabel(fieldType) {
                const labels = {
                    'text': 'Text Input',
                    'select': 'Choose Option',
                    'email': 'Email Address',
                    'phone': 'Phone Number',
                    'range': 'Budget Range',
                    'number': 'Number',
                    'textarea': 'Message',
                    'date': 'Date',
                    'checkbox': 'Select All That Apply',
                    'company': 'Company Name',
                    'industry': 'Industry',
                    'url': 'Website URL'
                };
                return labels[fieldType] || 'Field Label';
            }
            
            getFieldSpecificConfig(fieldType) {
                switch (fieldType) {
                    case 'select':
                    case 'checkbox':
                        return `
                            <div class="form-group">
                                <label class="form-label">Options (one per line)</label>
                                <textarea class="form-input" rows="4" placeholder="Option 1\nOption 2\nOption 3"></textarea>
                            </div>
                        `;
                    case 'industry':
                        return `
                            <div class="form-group">
                                <label class="form-label">Industry Options (one per line)</label>
                                <textarea class="form-input" rows="6" placeholder="Technology\nHealthcare\nFinance\nReal Estate\nEducation\nManufacturing\nRetail\nOther"></textarea>
                            </div>
                        `;
                    case 'range':
                        return `
                            <div class="form-group">
                                <label class="form-label">Range Configuration</label>
                                <div class="grid grid-cols-2" style="gap: var(--space-sm);">
                                    <input type="number" class="form-input" placeholder="Min Value" value="0">
                                    <input type="number" class="form-input" placeholder="Max Value" value="100">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Range Label (e.g., Budget, Size, etc.)</label>
                                <input type="text" class="form-input" placeholder="Budget" value="Budget">
                            </div>
                        `;
                    case 'textarea':
                        return `
                            <div class="form-group">
                                <label class="form-label">Rows</label>
                                <input type="number" class="form-input" value="4" min="2" max="10">
                            </div>
                        `;
                    case 'url':
                        return `
                            <div class="form-group">
                                <label class="form-label">URL Placeholder</label>
                                <input type="text" class="form-input" placeholder="https://example.com" value="https://example.com">
                            </div>
                        `;
                    default:
                        return '';
                }
            }
            
            saveLeadMagnet() {
                console.log('Saving lead magnet configuration...');
                
                // Show success message
                this.showNotification('Lead magnet configuration saved successfully!', 'success');
                
                // In a real implementation, this would save to the backend
                setTimeout(() => {
                    console.log('Configuration saved to backend');
                }, 1000);
            }
            
            switchPreviewDevice(device) {
                document.querySelectorAll('.device-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[onclick="app.switchPreviewDevice('${device}')"]`).classList.add('active');
                
                const previewContent = document.querySelector('.preview-content');
                if (previewContent) {
                    if (device === 'mobile') {
                        previewContent.style.maxWidth = '375px';
                        previewContent.style.margin = '0 auto';
                    } else {
                        previewContent.style.maxWidth = 'none';
                        previewContent.style.margin = '0';
                    }
                }
            }
            
            previewFormFactor(formFactor) {
                console.log(`Previewing form factor: ${formFactor}`);
                
                const previewContent = document.querySelector('.preview-content');
                if (!previewContent) return;
                
                let demoContent = '';
                
                switch (formFactor) {
                    case 'popup':
                        demoContent = `
                            <div class="chat-widget popup" style="position: relative; bottom: auto; right: auto; margin: 20px auto;">
                                <div class="chat-header">
                                    <div class="agent-avatar"></div>
                                    <div class="agent-info">
                                        <h4>AI Assistant</h4>
                                        <p>Here to help you</p>
                                    </div>
                                    <div class="chat-status">
                                        <div class="status-dot"></div>
                                        Online
                                    </div>
                                </div>
                                <div class="chat-messages">
                                    <div class="message agent">
                                        <div class="message-avatar">AI</div>
                                        <div class="message-bubble">Hi! I'm here to help you find the perfect solution for your needs. What brings you here today?</div>
                                    </div>
                                    <div class="typing-indicator">
                                        <div class="message-avatar">AI</div>
                                        <div class="typing-dots">
                                            <div class="typing-dot"></div>
                                            <div class="typing-dot"></div>
                                            <div class="typing-dot"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="chat-input-area">
                                    <div class="quick-replies">
                                        <div class="quick-reply">Get started</div>
                                        <div class="quick-reply">Learn more</div>
                                    </div>
                                    <div class="chat-input">
                                        <input type="text" placeholder="Type your message...">
                                        <button class="send-button">
                                            <span class="material-symbols-outlined">send</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                        break;
                    case 'slide':
                        demoContent = `
                            <div class="chat-widget slide active" style="position: relative; top: auto; right: auto; transform: none; margin: 20px auto;">
                                <div class="chat-header">
                                    <div class="agent-avatar"></div>
                                    <div class="agent-info">
                                        <h4>Quick Chat</h4>
                                        <p>Slide-in assistant</p>
                                    </div>
                                </div>
                                <div class="chat-messages">
                                    <div class="message agent">
                                        <div class="message-avatar">AI</div>
                                        <div class="message-bubble">I noticed you're browsing our services. Can I help you find what you're looking for?</div>
                                    </div>
                                </div>
                                <div class="chat-input-area">
                                    <div class="quick-replies">
                                        <div class="quick-reply">Yes, help me</div>
                                        <div class="quick-reply">Tell me more</div>
                                    </div>
                                </div>
                            </div>
                        `;
                        break;
                    case 'embedded':
                        demoContent = `
                            <div class="chat-widget embedded">
                                <div class="chat-header">
                                    <div class="agent-avatar"></div>
                                    <div class="agent-info">
                                        <h4>Smart Assistant</h4>
                                        <p>Get personalized recommendations</p>
                                    </div>
                                </div>
                                <div class="chat-messages">
                                    <div class="message agent">
                                        <div class="message-avatar">AI</div>
                                        <div class="message-bubble">Welcome! I'll help you get a customized analysis. Let's start with a few quick questions.</div>
                                    </div>
                                    <div class="conversation-step">
                                        <div class="step-header">
                                            <div class="step-icon">1</div>
                                            <div class="step-title">Tell us about your needs</div>
                                        </div>
                                        <div class="action-buttons">
                                            <button class="action-button primary">Get Started</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        break;
                    case 'floating':
                        demoContent = `
                            <div style="position: relative; display: flex; flex-direction: column; align-items: center; gap: 20px;">
                                <div class="floating-button pulse">
                                    
                                </div>
                                <div style="text-align: center; color: #64748b; font-size: 14px;">
                                    <p style="margin: 0;">Click to start conversation</p>
                                </div>
                            </div>
                        `;
                        break;
                }
                
                previewContent.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; padding: var(--space-2xl); min-height: 400px;">
                        ${demoContent}
                    </div>
                `;
            }
            
            // Page definitions
            pages = {
                dashboard: {
                    render: () => `
                        <div class="view">
                            <div class="page-header">
                                <h1 class="page-title">Welcome back!</h1>
                                <p class="page-subtitle">Here's how ACME Rentals is performing today.</p>
                            </div>
                            
                            <div class="grid grid-cols-5 mb-5">
                                <div class="metric-card">
                                    <div class="metric-value">342</div>
                                    <div class="metric-label">Total Leads</div>
                                    <div class="metric-change positive">
                                        <span class="material-symbols-outlined">trending_up</span>
                                        <span>12% from last month</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-value">$4,250</div>
                                    <div class="metric-label">Ad Spend</div>
                                    <div class="metric-change negative">
                                        <span class="material-symbols-outlined">trending_down</span>
                                        <span>8% from last month</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-value">12.4%</div>
                                    <div class="metric-label">Conversion Rate</div>
                                    <div class="metric-change positive">
                                        <span class="material-symbols-outlined">trending_up</span>
                                        <span>2.1% improvement</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-value">5</div>
                                    <div class="metric-label">Active Campaigns</div>
                                    <div class="metric-change">
                                        <span class="text-muted">2 pending approval</span>
                                    </div>
                                </div>
                                <div class="metric-card" style="cursor: pointer;" onclick="app.navigate('analytics')">
                                    <div class="metric-value">3</div>
                                    <div class="metric-label">Pending Review</div>
                                    <div class="metric-change">
                                        <span class="text-muted">Awaiting your input</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">Your Account Manager</h2>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: flex; align-items: center; gap: var(--space-lg);">
                                            <div style="width: 80px; height: 80px; border-radius: 50%; background: var(--m5-primary); color: white; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 600;">
                                                SM
                                            </div>
                                            <div style="flex: 1;">
                                                <h3 style="margin: 0 0 var(--space-xs) 0;">Sarah Martinez</h3>
                                                <p class="text-muted" style="margin: 0 0 var(--space-sm) 0;">Senior Marketing Strategist</p>
                                                <p class="text-small text-muted" style="margin: 0;">
                                                    <span class="material-symbols-outlined" style="font-size: 16px; vertical-align: text-bottom;">phone</span> (555) 123-4567 ext. 234<br>
                                                    <span class="material-symbols-outlined" style="font-size: 16px; vertical-align: text-bottom;">schedule</span> Next check-in: Thursday, Aug 15 at 2:00 PM
                                                </p>
                                            </div>
                                        </div>
                                        <div style="margin-top: var(--space-lg);">
                                            <button class="btn btn-primary" style="width: 100%;" onclick="app.showMessageModal()">
                                                <span class="material-symbols-outlined">chat</span>
                                                Send Message
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">ACME Rentals Marketing Services</h2>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: flex; flex-direction: column; gap: var(--space-md);">
                                            <div style="display: flex; align-items: center; justify-content: space-between; padding: var(--space-sm); background: var(--m5-gray-50); border-radius: var(--border-radius);">
                                                <div style="display: flex; align-items: center; gap: var(--space-sm);">
                                                    <span class="material-symbols-outlined" style="color: var(--m5-success);">check_circle</span>
                                                    <span>Property Marketing Engine</span>
                                                </div>
                                                <span class="badge badge-success">Active</span>
                                            </div>
                                            <div style="display: flex; align-items: center; justify-content: space-between; padding: var(--space-sm); background: var(--m5-gray-50); border-radius: var(--border-radius);">
                                                <div style="display: flex; align-items: center; gap: var(--space-sm);">
                                                    <span class="material-symbols-outlined" style="color: var(--m5-success);">check_circle</span>
                                                    <span>Rental Lead Generator</span>
                                                </div>
                                                <span class="badge badge-success">Active</span>
                                            </div>
                                            <div style="display: flex; align-items: center; justify-content: space-between; padding: var(--space-sm); background: var(--m5-gray-50); border-radius: var(--border-radius);">
                                                <div style="display: flex; align-items: center; gap: var(--space-sm);">
                                                    <span class="material-symbols-outlined" style="color: var(--m5-success);">check_circle</span>
                                                    <span>Property Showcase Suite</span>
                                                </div>
                                                <span class="badge badge-success">Active</span>
                                            </div>
                                            <div style="display: flex; align-items: center; justify-content: space-between; padding: var(--space-sm); background: var(--m5-gray-50); border-radius: var(--border-radius);">
                                                <div style="display: flex; align-items: center; gap: var(--space-sm);">
                                                    <span class="material-symbols-outlined" style="color: var(--m5-warning);">schedule</span>
                                                    <span>Community Engagement Accelerator</span>
                                                </div>
                                                <span class="badge badge-warning">Starting Sept 1</span>
                                            </div>
                                        </div>
                                        <p class="text-small text-muted" style="margin-top: var(--space-md); margin-bottom: 0;">
                                            Total Monthly Investment: <strong>$4,250</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">Lead Magnet Overview</h2>
                                        <button class="btn btn-ghost btn-sm" onclick="app.navigate('leads')">View All</button>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-container">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Widget</th>
                                                        <th>Today</th>
                                                        <th>This Week</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>Property Inquiry Form</td>
                                                        <td>12</td>
                                                        <td>45</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Virtual Tour Request</td>
                                                        <td>8</td>
                                                        <td>32</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Rental Application</td>
                                                        <td>5</td>
                                                        <td>19</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div style="margin-top: var(--space-md); text-align: center;">
                                            <p class="text-small text-muted">Total leads today: <strong>25</strong></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-2">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">Recent Activity</h2>
                                        <button class="btn btn-ghost btn-sm">View All</button>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-container">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Action</th>
                                                        <th>Details</th>
                                                        <th>Time</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>Campaign Launch</td>
                                                        <td>Summer Sale 2024</td>
                                                        <td>2 hours ago</td>
                                                    </tr>
                                                    <tr>
                                                        <td>New Lead</td>
                                                        <td>Contact form submission</td>
                                                        <td>3 hours ago</td>
                                                    </tr>
                                                    <tr>
                                                        <td>Report Generated</td>
                                                        <td>Monthly Analytics</td>
                                                        <td>5 hours ago</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">Lead Capture Performance</h2>
                                        <button class="btn btn-ghost btn-sm">Details</button>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="leadChart" width="400" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `,
                    onMount: () => {
                        // Initialize chart
                        const ctx = document.getElementById('leadChart');
                        if (ctx && window.Chart) {
                            // Destroy existing chart if it exists
                            if (app.chartInstances.leadChart) {
                                app.chartInstances.leadChart.destroy();
                            }
                            
                            // Create new chart and store reference
                            app.chartInstances.leadChart = new Chart(ctx, {
                                type: 'line',
                                data: {
                                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                                    datasets: [{
                                        label: 'Leads',
                                        data: [12, 19, 15, 25, 22, 30, 28],
                                        borderColor: '#DD4124',
                                        backgroundColor: 'rgba(221, 65, 36, 0.1)',
                                        tension: 0.4
                                    }]
                                },
                                options: {
                                    responsive: true,
                                    maintainAspectRatio: false,
                                    plugins: {
                                        legend: {
                                            display: false
                                        }
                                    },
                                    scales: {
                                        y: {
                                            beginAtZero: true
                                        }
                                    }
                                }
                            });
                        }
                    }
                },
                
                campaigns: {
                    render: () => `
                        <div class="view">
                            <div class="page-header">
                                <h1 class="page-title">Campaigns</h1>
                                <p class="page-subtitle">Manage your marketing campaigns</p>
                            </div>
                            
                            <div class="mb-4 flex" style="justify-content: space-between; align-items: center;">
                                <div class="flex" style="gap: var(--space-md);">
                                    <button class="btn btn-secondary">
                                        <span class="material-symbols-outlined">filter_list</span>
                                        Filter
                                    </button>
                                    <button class="btn btn-secondary">
                                        <span class="material-symbols-outlined">sort</span>
                                        Sort
                                    </button>
                                </div>
                                <button class="btn btn-primary">
                                    <span class="material-symbols-outlined">add</span>
                                    New Campaign
                                </button>
                            </div>
                            
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Campaign Name</th>
                                                    <th>Status</th>
                                                    <th>Budget</th>
                                                    <th>Spent</th>
                                                    <th>Leads</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><strong>Luxury Apartment Showcase 2024</strong></td>
                                                    <td><span class="badge badge-success">Active</span></td>
                                                    <td>$5,000</td>
                                                    <td>$3,250</td>
                                                    <td>142</td>
                                                    <td>
                                                        <button class="btn btn-ghost btn-sm">Edit</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Fall Move-In Special</strong></td>
                                                    <td><span class="badge badge-warning">Scheduled</span></td>
                                                    <td>$3,000</td>
                                                    <td>$0</td>
                                                    <td>0</td>
                                                    <td>
                                                        <button class="btn btn-ghost btn-sm">Edit</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Corporate Housing Campaign</strong></td>
                                                    <td><span class="badge badge-info">Completed</span></td>
                                                    <td>$4,000</td>
                                                    <td>$3,980</td>
                                                    <td>198</td>
                                                    <td>
                                                        <button class="btn btn-ghost btn-sm">View</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                
                leads: {
                    render: () => `
                        <div class="view">
                            <div class="page-header" style="display: flex; align-items: center; justify-content: space-between;">
                                <div>
                                    <h1 class="page-title">Lead Magnet Configuration</h1>
                                    <p class="page-subtitle">Design and customize your conversational lead capture system</p>
                                </div>
                                <div style="display: flex; gap: var(--space-md);">
                                    <button class="btn btn-secondary" onclick="window.open('/tmpl/acme_rentals_demo.html', '_blank')">
                                        <span class="material-symbols-outlined">visibility</span>
                                        Preview Demo
                                    </button>
                                    <button class="btn btn-primary" onclick="app.saveLeadMagnet()">
                                        <span class="material-symbols-outlined">save</span>
                                        Save Changes
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Performance Metrics -->
                            <div class="grid grid-cols-4 mb-5">
                                <div class="metric-card">
                                    <div class="metric-value">342</div>
                                    <div class="metric-label">Total Conversations</div>
                                    <div class="metric-change">
                                        <span class="text-success">+23% this week</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-value">67%</div>
                                    <div class="metric-label">Completion Rate</div>
                                    <div class="metric-change">
                                        <span class="text-success">+8% vs static forms</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-value">89</div>
                                    <div class="metric-label">Qualified Leads</div>
                                    <div class="metric-change">
                                        <span class="text-success">73% qualification rate</span>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-value">24</div>
                                    <div class="metric-label">Appointments Booked</div>
                                    <div class="metric-change">
                                        <span class="text-success">27% booking rate</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Configuration Panel -->
                            <div class="config-panel">
                                <div class="config-tabs">
                                    <button class="config-tab active" data-tab="templates" onclick="app.switchConfigTab('templates')">
                                        <span class="material-symbols-outlined">palette</span>
                                        Templates
                                    </button>
                                    <button class="config-tab" data-tab="fields" onclick="app.switchConfigTab('fields')">
                                        <span class="material-symbols-outlined">tune</span>
                                        Fields & Questions
                                    </button>
                                    <button class="config-tab" data-tab="flow" onclick="app.switchConfigTab('flow')">
                                        <span class="material-symbols-outlined">route</span>
                                        Conversation Flow
                                    </button>
                                    <button class="config-tab" data-tab="actions" onclick="app.switchConfigTab('actions')">
                                        <span class="material-symbols-outlined">rocket_launch</span>
                                        Actions & Scheduling
                                    </button>
                                    <button class="config-tab" data-tab="preview" onclick="app.switchConfigTab('preview')">
                                        <span class="material-symbols-outlined">preview</span>
                                        Live Preview
                                    </button>
                                </div>
                                
                                <div class="config-content">
                                    <!-- Configuration Tab -->
                                    <div class="config-tab-content active" data-content="templates">
                                        <h3 style="margin-bottom: var(--space-lg);">Lead Magnet Configuration</h3>
                                        <div class="config-section">
                                            <div class="form-group">
                                                <label class="form-label">Widget Title</label>
                                                <input type="text" class="form-input" placeholder="Enter widget title" value="Get Your Free Consultation">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Welcome Message</label>
                                                <textarea class="form-input" rows="3" placeholder="Hi! I'm here to help you with...">Hi! I'm here to help you get started. Let me ask you a few quick questions to provide you with the best solution.</textarea>
                                            </div>
                                            <div class="grid grid-cols-2" style="gap: var(--space-lg);">
                                                <div class="form-group">
                                                    <label class="form-label">Primary Color</label>
                                                    <input type="color" class="form-input" value="#DD4124">
                                                </div>
                                                <div class="form-group">
                                                    <label class="form-label">Button Text</label>
                                                    <input type="text" class="form-input" value="Get Started">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Form Factor</label>
                                                <div class="radio-group">
                                                    <label class="radio-item">
                                                        <input type="radio" name="formFactor" value="popup" checked>
                                                        <span class="radio-custom"></span>
                                                        Popup Modal
                                                    </label>
                                                    <label class="radio-item">
                                                        <input type="radio" name="formFactor" value="slide">
                                                        <span class="radio-custom"></span>
                                                        Slide-in Panel
                                                    </label>
                                                    <label class="radio-item">
                                                        <input type="radio" name="formFactor" value="embedded">
                                                        <span class="radio-custom"></span>
                                                        Embedded Form
                                                    </label>
                                                    <label class="radio-item">
                                                        <input type="radio" name="formFactor" value="floating">
                                                        <span class="radio-custom"></span>
                                                        Floating Button
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Trigger Settings</label>
                                                <select class="form-select">
                                                    <option>On page load (3 second delay)</option>
                                                    <option>On scroll (50% down page)</option>
                                                    <option>On exit intent</option>
                                                    <option>On button click</option>
                                                    <option>Time-based (30 seconds)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Fields Tab -->
                                    <div class="config-tab-content" data-content="fields">
                                        <h3 style="margin-bottom: var(--space-lg);">Customize Form Fields & Questions</h3>
                                        <div class="field-builder">
                                            <div>
                                                <h4 style="margin-bottom: var(--space-md);">Available Fields</h4>
                                                <div class="field-list">
                                                    <div class="field-item" data-field="text">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">text_fields</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Text Input</h4>
                                                                <p>Single line text field</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('text')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="select">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">list</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Multiple Choice</h4>
                                                                <p>Dropdown or radio buttons</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('select')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="email">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">email</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Email Address</h4>
                                                                <p>Email validation included</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('email')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="phone">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">phone</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Phone Number</h4>
                                                                <p>Phone format validation</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('phone')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="range">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">tune</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Range Slider</h4>
                                                                <p>Budget/value range selection</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('range')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="number">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">123</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Number Input</h4>
                                                                <p>Numeric values only</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('number')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="textarea">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">notes</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Text Area</h4>
                                                                <p>Multi-line text input</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('textarea')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="date">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">calendar_month</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Date Picker</h4>
                                                                <p>Date selection with calendar</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('date')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="checkbox">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">check_box</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Checkboxes</h4>
                                                                <p>Multiple selection options</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('checkbox')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="company">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">business</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Company Name</h4>
                                                                <p>Business/organization field</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('company')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="industry">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">category</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Industry</h4>
                                                                <p>Business sector selection</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('industry')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="field-item" data-field="url">
                                                        <div class="field-info">
                                                            <div class="field-type-icon">
                                                                <span class="material-symbols-outlined">link</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Website URL</h4>
                                                                <p>URL validation included</p>
                                                            </div>
                                                        </div>
                                                        <div class="field-actions">
                                                            <button class="btn btn-ghost btn-sm" onclick="app.addField('url')">
                                                                <span class="material-symbols-outlined">add</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <h4 style="margin-bottom: var(--space-md);">Field Configuration</h4>
                                                <div class="field-config">
                                                    <div id="fieldConfigContent">
                                                        <div style="text-align: center; color: var(--m5-gray-500); padding: var(--space-xl);">
                                                            <span class="material-symbols-outlined" style="font-size: 48px; margin-bottom: var(--space-md);">tune</span>
                                                            <p>Select a field to configure its properties</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Conversation Flow Tab -->
                                    <div class="config-tab-content" data-content="flow">
                                        <h3 style="margin-bottom: var(--space-lg);">Conversation Flow Builder</h3>
                                        <div class="flow-builder">
                                            <div class="flow-canvas">
                                                <div class="flow-step" data-step="welcome">
                                                    <div class="flow-step-icon"></div>
                                                    <div class="flow-step-content">
                                                        <h4>Welcome Message</h4>
                                                        <p>Hi! I'm here to help you find the perfect solution...</p>
                                                    </div>
                                                    <div class="flow-step-actions">
                                                        <button class="btn btn-ghost btn-sm">Edit</button>
                                                    </div>
                                                </div>
                                                
                                                <div class="flow-arrow"></div>
                                                
                                                <div class="flow-step" data-step="qualification">
                                                    <div class="flow-step-icon"></div>
                                                    <div class="flow-step-content">
                                                        <h4>Qualification Questions</h4>
                                                        <p>What type of solution are you looking for?</p>
                                                    </div>
                                                    <div class="flow-step-actions">
                                                        <button class="btn btn-ghost btn-sm">Edit</button>
                                                    </div>
                                                </div>
                                                
                                                <div class="flow-arrow"></div>
                                                
                                                <div class="flow-step" data-step="value">
                                                    <div class="flow-step-icon"></div>
                                                    <div class="flow-step-content">
                                                        <h4>Value Delivery</h4>
                                                        <p>Based on your needs, here's a personalized analysis...</p>
                                                    </div>
                                                    <div class="flow-step-actions">
                                                        <button class="btn btn-ghost btn-sm">Edit</button>
                                                    </div>
                                                </div>
                                                
                                                <div class="flow-arrow"></div>
                                                
                                                <div class="flow-step" data-step="action">
                                                    <div class="flow-step-icon"></div>
                                                    <div class="flow-step-content">
                                                        <h4>Call to Action</h4>
                                                        <p>Ready to schedule a consultation?</p>
                                                    </div>
                                                    <div class="flow-step-actions">
                                                        <button class="btn btn-ghost btn-sm">Edit</button>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="flow-sidebar">
                                                <h4 style="margin-bottom: var(--space-md);">Flow Components</h4>
                                                <div class="component-list">
                                                    <div class="component-item" draggable="true">
                                                        <span class="material-symbols-outlined">message</span>
                                                        Message
                                                    </div>
                                                    <div class="component-item" draggable="true">
                                                        <span class="material-symbols-outlined">help</span>
                                                        Question
                                                    </div>
                                                    <div class="component-item" draggable="true">
                                                        <span class="material-symbols-outlined">functions</span>
                                                        Calculator
                                                    </div>
                                                    <div class="component-item" draggable="true">
                                                        <span class="material-symbols-outlined">split_scene</span>
                                                        Condition
                                                    </div>
                                                    <div class="component-item" draggable="true">
                                                        <span class="material-symbols-outlined">play_arrow</span>
                                                        Action
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Actions Tab -->
                                    <div class="config-tab-content" data-content="actions">
                                        <h3 style="margin-bottom: var(--space-lg);">Actions & Scheduling Configuration</h3>
                                        <div class="grid grid-cols-2" style="gap: var(--space-xl);">
                                            <div>
                                                <h4 style="margin-bottom: var(--space-md);">Available Actions</h4>
                                                <div class="field-list">
                                                    <div class="field-item active">
                                                        <div class="field-info">
                                                            <div class="field-type-icon" style="background: var(--m5-success);">
                                                                <span class="material-symbols-outlined">calendar_today</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Book Appointment</h4>
                                                                <p>Direct calendar scheduling integration</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="field-item">
                                                        <div class="field-info">
                                                            <div class="field-type-icon" style="background: var(--m5-info);">
                                                                <span class="material-symbols-outlined">phone_callback</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Request Callback</h4>
                                                                <p>Schedule a phone call with team</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="field-item">
                                                        <div class="field-info">
                                                            <div class="field-type-icon" style="background: var(--m5-warning);">
                                                                <span class="material-symbols-outlined">sms</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>SMS Updates</h4>
                                                                <p>Text message follow-up sequence</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="field-item">
                                                        <div class="field-info">
                                                            <div class="field-type-icon" style="background: var(--m5-secondary);">
                                                                <span class="material-symbols-outlined">email</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Email Report</h4>
                                                                <p>Send detailed analysis via email</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="field-item">
                                                        <div class="field-info">
                                                            <div class="field-type-icon" style="background: var(--m5-accent);">
                                                                <span class="material-symbols-outlined">request_quote</span>
                                                            </div>
                                                            <div class="field-details">
                                                                <h4>Request Quote</h4>
                                                                <p>Generate custom pricing proposal</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <h4 style="margin-bottom: var(--space-md);">Appointment Configuration</h4>
                                                <div class="field-config">
                                                    <div class="form-group">
                                                        <label class="form-label">Calendar Integration</label>
                                                        <select class="form-select">
                                                            <option value="calendly">Calendly</option>
                                                            <option value="acuity">Acuity Scheduling</option>
                                                            <option value="google">Google Calendar</option>
                                                            <option value="outlook">Outlook Calendar</option>
                                                            <option value="custom">Custom Integration</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="form-label">Available Services</label>
                                                        <div class="checkbox-group">
                                                            <label class="checkbox-item">
                                                                <input type="checkbox" checked>
                                                                Initial Consultation (45 min)
                                                            </label>
                                                            <label class="checkbox-item">
                                                                <input type="checkbox" checked>
                                                                Strategic Analysis (30 min)
                                                            </label>
                                                            <label class="checkbox-item">
                                                                <input type="checkbox">
                                                                Deep Dive Session (90 min)
                                                            </label>
                                                            <label class="checkbox-item">
                                                                <input type="checkbox">
                                                                Discovery Call (15 min)
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="form-label">Business Hours</label>
                                                        <div class="grid grid-cols-2" style="gap: var(--space-sm);">
                                                            <input type="time" class="form-input" value="09:00">
                                                            <input type="time" class="form-input" value="17:00">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="form-label">Time Zone</label>
                                                        <select class="form-select">
                                                            <option value="EST">Eastern Time (EST)</option>
                                                            <option value="CST">Central Time (CST)</option>
                                                            <option value="MST">Mountain Time (MST)</option>
                                                            <option value="PST">Pacific Time (PST)</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Preview Tab -->
                                    <div class="config-tab-content" data-content="preview">
                                        <h3 style="margin-bottom: var(--space-lg);">Live Preview</h3>
                                        <div class="preview-container">
                                            <div class="preview-device">
                                                <div class="preview-toolbar">
                                                    <div style="font-size: var(--font-size-sm); font-weight: 600;">Conversational Lead Magnet Preview</div>
                                                    <div class="device-selector">
                                                        <button class="device-btn active" onclick="app.switchPreviewDevice('desktop')">Desktop</button>
                                                        <button class="device-btn" onclick="app.switchPreviewDevice('mobile')">Mobile</button>
                                                    </div>
                                                </div>
                                                <div class="preview-content">
                                                    <div style="text-align: center; padding: var(--space-2xl);">
                                                        <div style="font-size: 48px; margin-bottom: var(--space-md);"></div>
                                                        <h4 style="margin-bottom: var(--space-sm);">Conversational Lead Magnet</h4>
                                                        <p style="color: var(--m5-gray-600); font-size: var(--font-size-sm); margin-bottom: var(--space-lg);">Interactive preview will appear here</p>
                                                        <div class="form-factor-selector">
                                                            <button class="btn btn-secondary btn-sm" onclick="app.previewFormFactor('popup')">Popup</button>
                                                            <button class="btn btn-secondary btn-sm" onclick="app.previewFormFactor('slide')">Slide-in</button>
                                                            <button class="btn btn-secondary btn-sm" onclick="app.previewFormFactor('embedded')">Embedded</button>
                                                            <button class="btn btn-secondary btn-sm" onclick="app.previewFormFactor('floating')">Floating</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                
                analytics: {
                    render: () => `
                        <div class="view">
                            <div class="page-header">
                                <h1 class="page-title">Your Program</h1>
                                <p class="page-subtitle">Track your marketing program progress and milestones</p>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h2 class="card-title">Program Status</h2>
                                </div>
                                <div class="card-body" style="padding: var(--space-md);">
                                    <div class="grid grid-cols-3" style="gap: var(--space-md);">
                                        <div class="program-step completed">
                                            <div class="step-icon">
                                                <span class="material-symbols-outlined">check_circle</span>
                                            </div>
                                            <div class="step-title">Kickoff Meeting</div>
                                            <div class="step-status">Completed</div>
                                        </div>
                                        <div class="program-step completed">
                                            <div class="step-icon">
                                                <span class="material-symbols-outlined">check_circle</span>
                                            </div>
                                            <div class="step-title">Setup & Configuration</div>
                                            <div class="step-status">Completed</div>
                                            <button class="btn btn-ghost btn-sm mt-2" id="configEditBtn">
                                                <span class="material-symbols-outlined">edit</span>
                                                Edit
                                            </button>
                                        </div>
                                        <div class="program-step active">
                                            <div class="step-icon">
                                                <span class="material-symbols-outlined">rocket_launch</span>
                                            </div>
                                            <div class="step-title">Program Live</div>
                                            <div class="step-status">Active</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h2 class="card-title">Pending Deliverables</h2>
                                    <span class="badge badge-danger">3 items</span>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Deliverable</th>
                                                    <th>Type</th>
                                                    <th>Submitted</th>
                                                    <th>Status</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><strong>ACME Rentals Summer Promotion Ads</strong></td>
                                                    <td>Ad Creative</td>
                                                    <td>Today, 10:30 AM</td>
                                                    <td><span class="badge badge-warning">Pending Review</span></td>
                                                    <td>
                                                        <button class="btn btn-primary btn-sm" onclick="app.showDeliverableReview('ACME Rentals Summer Promotion Ads', 'ad-creative')">
                                                            <span class="material-symbols-outlined">visibility</span>
                                                            Review
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><strong>August Property Showcase Content</strong></td>
                                                    <td>Content Strategy</td>
                                                    <td>Yesterday, 3:45 PM</td>
                                                    <td><span class="badge badge-warning">Pending Review</span></td>
                                                    <td>
                                                        <button class="btn btn-primary btn-sm" onclick="app.showDeliverableReview('August Property Showcase Content', 'content-calendar')">
                                                            <span class="material-symbols-outlined">visibility</span>
                                                            Review
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Luxury Apartment Landing Page</strong></td>
                                                    <td>Web Design</td>
                                                    <td>2 days ago</td>
                                                    <td><span class="badge badge-warning">Pending Review</span></td>
                                                    <td>
                                                        <button class="btn btn-primary btn-sm" onclick="app.showDeliverableReview('Luxury Apartment Landing Page', 'landing-page')">
                                                            <span class="material-symbols-outlined">visibility</span>
                                                            Review
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h2 class="card-title">Recent Actions</h2>
                                </div>
                                <div class="card-body">
                                    <div class="table-container">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Action</th>
                                                    <th>Details</th>
                                                    <th>Date</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Campaign Adjustment</td>
                                                    <td>Optimized targeting for Summer Sale campaign</td>
                                                    <td>Today, 2:30 PM</td>
                                                    <td><span class="badge badge-success">Complete</span></td>
                                                </tr>
                                                <tr>
                                                    <td>New Imagery Added</td>
                                                    <td>Updated hero images for Rental Property #2 campaign</td>
                                                    <td>Today, 11:15 AM</td>
                                                    <td><span class="badge badge-success">Complete</span></td>
                                                </tr>
                                                <tr>
                                                    <td>Budget Increase</td>
                                                    <td>Increased daily budget by 20% for high-performing ads</td>
                                                    <td>Yesterday, 4:45 PM</td>
                                                    <td><span class="badge badge-success">Complete</span></td>
                                                </tr>
                                                <tr>
                                                    <td>A/B Test Launch</td>
                                                    <td>Started testing new ad copy variations</td>
                                                    <td>2 days ago</td>
                                                    <td><span class="badge badge-info">Running</span></td>
                                                </tr>
                                                <tr>
                                                    <td>Keyword Research</td>
                                                    <td>Added 15 new high-intent keywords to campaigns</td>
                                                    <td>3 days ago</td>
                                                    <td><span class="badge badge-success">Complete</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                
                files: {
                    render: () => `
                        <div class="view">
                            <div class="page-header">
                                <h1 class="page-title">Files & Assets</h1>
                                <p class="page-subtitle">Your marketing materials and documents</p>
                            </div>
                            
                            <div class="file-toolbar mb-4">
                                <div class="flex" style="gap: var(--space-md);">
                                    <button class="btn btn-primary" onclick="app.showUploadModal()">
                                        <span class="material-symbols-outlined">upload</span>
                                        Upload Files
                                    </button>
                                    <button class="btn btn-secondary">
                                        <span class="material-symbols-outlined">create_new_folder</span>
                                        New Folder
                                    </button>
                                </div>
                                <div class="flex" style="gap: var(--space-md);">
                                    <div class="file-search">
                                        <span class="material-symbols-outlined">search</span>
                                        <input type="text" placeholder="Search files..." class="file-search-input" id="fileSearchInput" onkeyup="app.searchFiles(this.value)">
                                    </div>
                                    <button class="btn btn-ghost active" id="listViewBtn" onclick="app.setFileView('list')">
                                        <span class="material-symbols-outlined">view_list</span>
                                    </button>
                                    <button class="btn btn-ghost" id="gridViewBtn" onclick="app.setFileView('grid')">
                                        <span class="material-symbols-outlined">grid_view</span>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="file-breadcrumb mb-3">
                                <span class="breadcrumb-item">
                                    <span class="material-symbols-outlined">folder</span>
                                    Root
                                </span>
                                <span class="breadcrumb-separator">/</span>
                                <span class="breadcrumb-item">Marketing Materials</span>
                            </div>
                            
                            <div class="card">
                                <div class="card-body" style="padding: 0;">
                                    <div class="file-list">
                                        <div class="file-item folder" onclick="app.showFileModal('Campaign Assets', 'folder')">
                                            <div class="file-icon">
                                                <span class="material-symbols-outlined">folder</span>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">Campaign Assets</div>
                                                <div class="file-meta">12 items  Modified 2 days ago</div>
                                            </div>
                                        </div>
                                        <div class="file-item folder" onclick="app.showFileModal('Brand Guidelines', 'folder')">
                                            <div class="file-icon">
                                                <span class="material-symbols-outlined">folder</span>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">Brand Guidelines</div>
                                                <div class="file-meta">8 items  Modified 1 week ago</div>
                                            </div>
                                        </div>
                                        <div class="file-item folder" onclick="app.showFileModal('Social Media', 'folder')">
                                            <div class="file-icon">
                                                <span class="material-symbols-outlined">folder</span>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">Social Media</div>
                                                <div class="file-meta">24 items  Modified 3 days ago</div>
                                            </div>
                                        </div>
                                        <div class="file-item" onclick="app.showFileModal('Marketing_Strategy_2024.pdf', 'pdf')">
                                            <div class="file-icon pdf">
                                                <span class="material-symbols-outlined">description</span>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">Marketing_Strategy_2024.pdf</div>
                                                <div class="file-meta">2.4 MB  Modified yesterday</div>
                                            </div>
                                        </div>
                                        <div class="file-item" onclick="app.showFileModal('Summer_Campaign_Hero.jpg', 'image')">
                                            <div class="file-icon image">
                                                <span class="material-symbols-outlined">image</span>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">Summer_Campaign_Hero.jpg</div>
                                                <div class="file-meta">856 KB  Modified 4 days ago</div>
                                            </div>
                                        </div>
                                        <div class="file-item" onclick="app.showFileModal('Content_Calendar_July.docx', 'doc')">
                                            <div class="file-icon doc">
                                                <span class="material-symbols-outlined">article</span>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">Content_Calendar_July.docx</div>
                                                <div class="file-meta">124 KB  Modified 1 week ago</div>
                                            </div>
                                        </div>
                                        <div class="file-item" onclick="app.showFileModal('Product_Demo_Final.mp4', 'video')">
                                            <div class="file-icon video">
                                                <span class="material-symbols-outlined">movie</span>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">Product_Demo_Final.mp4</div>
                                                <div class="file-meta">45.2 MB  Modified 2 weeks ago</div>
                                            </div>
                                        </div>
                                        <div class="file-item" onclick="app.showFileModal('Campaign_Performance_Q2.xlsx', 'spreadsheet')">
                                            <div class="file-icon spreadsheet">
                                                <span class="material-symbols-outlined">table_chart</span>
                                            </div>
                                            <div class="file-info">
                                                <div class="file-name">Campaign_Performance_Q2.xlsx</div>
                                                <div class="file-meta">1.8 MB  Modified 5 days ago</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="file-status mt-3">
                                <span class="text-muted">8 items  52.3 MB used of 10 GB</span>
                            </div>
                        </div>
                    `
                },
                
                billing: {
                    render: () => `
                        <div class="view">
                            <div class="page-header">
                                <h1 class="page-title">Billing</h1>
                                <p class="page-subtitle">View your invoices and payment history</p>
                            </div>
                            
                            <div class="card">
                                <div class="card-body" style="padding: 0;">
                                    <div class="simple-invoice-list">
                                        <div class="simple-invoice-item">
                                            <div class="invoice-main-info">
                                                <span class="invoice-number">Invoice #2024-008</span>
                                                <span class="invoice-date">August 2024</span>
                                            </div>
                                            <div class="invoice-amount">$4,250.00</div>
                                            <span class="badge badge-warning">Due Aug 31</span>
                                            <button class="btn btn-primary btn-sm" onclick="app.showInvoiceModal('INV-2024-008')">
                                                View Invoice
                                            </button>
                                        </div>
                                        <div class="simple-invoice-item">
                                            <div class="invoice-main-info">
                                                <span class="invoice-number">Invoice #2024-007</span>
                                                <span class="invoice-date">July 2024</span>
                                            </div>
                                            <div class="invoice-amount">$4,250.00</div>
                                            <span class="badge badge-success">Paid</span>
                                            <button class="btn btn-secondary btn-sm" onclick="app.showInvoiceModal('INV-2024-007')">
                                                View Invoice
                                            </button>
                                        </div>
                                        <div class="simple-invoice-item">
                                            <div class="invoice-main-info">
                                                <span class="invoice-number">Invoice #2024-006</span>
                                                <span class="invoice-date">June 2024</span>
                                            </div>
                                            <div class="invoice-amount">$3,750.00</div>
                                            <span class="badge badge-success">Paid</span>
                                            <button class="btn btn-secondary btn-sm" onclick="app.showInvoiceModal('INV-2024-006')">
                                                View Invoice
                                            </button>
                                        </div>
                                        <div class="simple-invoice-item">
                                            <div class="invoice-main-info">
                                                <span class="invoice-number">Invoice #2024-005</span>
                                                <span class="invoice-date">May 2024</span>
                                            </div>
                                            <div class="invoice-amount">$3,750.00</div>
                                            <span class="badge badge-success">Paid</span>
                                            <button class="btn btn-secondary btn-sm" onclick="app.showInvoiceModal('INV-2024-005')">
                                                View Invoice
                                            </button>
                                        </div>
                                        <div class="simple-invoice-item">
                                            <div class="invoice-main-info">
                                                <span class="invoice-number">Invoice #2024-004</span>
                                                <span class="invoice-date">April 2024</span>
                                            </div>
                                            <div class="invoice-amount">$3,500.00</div>
                                            <span class="badge badge-success">Paid</span>
                                            <button class="btn btn-secondary btn-sm" onclick="app.showInvoiceModal('INV-2024-004')">
                                                View Invoice
                                            </button>
                                        </div>
                                        <div class="simple-invoice-item">
                                            <div class="invoice-main-info">
                                                <span class="invoice-number">Invoice #2024-003</span>
                                                <span class="invoice-date">March 2024</span>
                                            </div>
                                            <div class="invoice-amount">$3,500.00</div>
                                            <span class="badge badge-success">Paid</span>
                                            <button class="btn btn-secondary btn-sm" onclick="app.showInvoiceModal('INV-2024-003')">
                                                View Invoice
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                
                support: {
                    render: () => `
                        <div class="view">
                            <div class="page-header">
                                <h1 class="page-title">Get Support</h1>
                                <p class="page-subtitle">We're here to help you succeed</p>
                            </div>
                            
                            <div class="grid grid-cols-2 mb-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">Contact Your Account Manager</h2>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: flex; align-items: center; gap: var(--space-lg); margin-bottom: var(--space-lg);">
                                            <div style="width: 60px; height: 60px; border-radius: 50%; background: var(--m5-primary); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 600;">
                                                SM
                                            </div>
                                            <div style="flex: 1;">
                                                <h3 style="margin: 0 0 var(--space-xs) 0; font-size: var(--font-size-lg);">Sarah Martinez</h3>
                                                <p class="text-muted" style="margin: 0;">Senior Marketing Strategist</p>
                                            </div>
                                        </div>
                                        
                                        <div style="background: var(--m5-gray-50); padding: var(--space-md); border-radius: var(--border-radius); margin-bottom: var(--space-lg);">
                                            <p style="margin: 0 0 var(--space-sm) 0; font-weight: 600;">Best for:</p>
                                            <ul style="margin: 0; padding-left: var(--space-lg); color: var(--m5-gray-700);">
                                                <li>Questions about your marketing program</li>
                                                <li>Campaign performance and strategy</li>
                                                <li>Service updates or changes</li>
                                                <li>General account questions</li>
                                                <li>Billing inquiries</li>
                                            </ul>
                                        </div>
                                        
                                        <button class="btn btn-primary" style="width: 100%;" onclick="app.showMessageModal()">
                                            <span class="material-symbols-outlined">chat</span>
                                            Send Message
                                        </button>
                                        
                                        <p class="text-small text-muted" style="margin-top: var(--space-md); text-align: center;">
                                            Response time: Within 1 business day
                                        </p>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="card-title">Submit a Technical Support Ticket</h2>
                                    </div>
                                    <div class="card-body">
                                        <div style="display: flex; align-items: center; gap: var(--space-lg); margin-bottom: var(--space-lg);">
                                            <div style="width: 60px; height: 60px; border-radius: 50%; background: var(--m5-accent); color: white; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                                                <span class="material-symbols-outlined">support_agent</span>
                                            </div>
                                            <div style="flex: 1;">
                                                <h3 style="margin: 0 0 var(--space-xs) 0; font-size: var(--font-size-lg);">Technical Support Team</h3>
                                                <p class="text-muted" style="margin: 0;">Portal & System Issues</p>
                                            </div>
                                        </div>
                                        
                                        <div style="background: var(--m5-gray-50); padding: var(--space-md); border-radius: var(--border-radius); margin-bottom: var(--space-lg);">
                                            <p style="margin: 0 0 var(--space-sm) 0; font-weight: 600;">Best for:</p>
                                            <ul style="margin: 0; padding-left: var(--space-lg); color: var(--m5-gray-700);">
                                                <li>Portal login or access issues</li>
                                                <li>File upload/download problems</li>
                                                <li>Lead Magnet widget errors</li>
                                                <li>Technical bugs or glitches</li>
                                                <li>Integration issues</li>
                                            </ul>
                                        </div>
                                        
                                        <button class="btn btn-secondary" style="width: 100%;" onclick="app.showTicketModal()">
                                            <span class="material-symbols-outlined">confirmation_number</span>
                                            Create Support Ticket
                                        </button>
                                        
                                        <p class="text-small text-muted" style="margin-top: var(--space-md); text-align: center;">
                                            Response time: Within 4 hours
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h2 class="card-title">Frequently Asked Questions</h2>
                                </div>
                                <div class="card-body">
                                    <div style="display: flex; flex-direction: column; gap: var(--space-lg);">
                                        <div>
                                            <h4 style="margin: 0 0 var(--space-sm) 0; color: var(--m5-gray-900);">How do I upload files to the portal?</h4>
                                            <p class="text-muted" style="margin: 0;">Navigate to Files & Assets, click "Upload Files", then drag and drop your files or click to browse. You can select a destination folder before uploading.</p>
                                        </div>
                                        <div>
                                            <h4 style="margin: 0 0 var(--space-sm) 0; color: var(--m5-gray-900);">How can I track my lead generation performance?</h4>
                                            <p class="text-muted" style="margin: 0;">Visit the Lead Magnet section to view all your active widgets, their performance metrics, and captured leads. You can export data for further analysis.</p>
                                        </div>
                                        <div>
                                            <h4 style="margin: 0 0 var(--space-sm) 0; color: var(--m5-gray-900);">When will I receive my monthly invoice?</h4>
                                            <p class="text-muted" style="margin: 0;">Invoices are generated on the 1st of each month and can be viewed immediately in the Billing section. Email notifications are also sent to your registered email.</p>
                                        </div>
                                        <div>
                                            <h4 style="margin: 0 0 var(--space-sm) 0; color: var(--m5-gray-900);">How do I approve deliverables?</h4>
                                            <p class="text-muted" style="margin: 0;">Go to Your Program section to see pending deliverables. Click "Review" to preview the work, then you can either approve it or request changes with feedback.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h2 class="card-title">Additional Resources</h2>
                                </div>
                                <div class="card-body">
                                    <div class="grid grid-cols-3" style="gap: var(--space-md);">
                                        <a href="#" class="card hover-lift" style="text-decoration: none; color: inherit; cursor: pointer;">
                                            <div class="card-body" style="text-align: center;">
                                                <span class="material-symbols-outlined" style="font-size: 48px; color: var(--m5-primary); margin-bottom: var(--space-md);">menu_book</span>
                                                <h4 style="margin: 0 0 var(--space-sm) 0;">User Guide</h4>
                                                <p class="text-small text-muted" style="margin: 0;">Complete portal documentation</p>
                                            </div>
                                        </a>
                                        <a href="#" class="card hover-lift" style="text-decoration: none; color: inherit; cursor: pointer;">
                                            <div class="card-body" style="text-align: center;">
                                                <span class="material-symbols-outlined" style="font-size: 48px; color: var(--m5-primary); margin-bottom: var(--space-md);">play_circle</span>
                                                <h4 style="margin: 0 0 var(--space-sm) 0;">Video Tutorials</h4>
                                                <p class="text-small text-muted" style="margin: 0;">Step-by-step walkthroughs</p>
                                            </div>
                                        </a>
                                        <a href="#" class="card hover-lift" style="text-decoration: none; color: inherit; cursor: pointer;">
                                            <div class="card-body" style="text-align: center;">
                                                <span class="material-symbols-outlined" style="font-size: 48px; color: var(--m5-primary); margin-bottom: var(--space-md);">school</span>
                                                <h4 style="margin: 0 0 var(--space-sm) 0;">Marketing Academy</h4>
                                                <p class="text-small text-muted" style="margin: 0;">Learn marketing best practices</p>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                
                'add-users': {
                    render: () => `
                        <div class="view">
                            <div class="page-header">
                                <h1 class="page-title">Add New User</h1>
                                <p class="page-subtitle">Create a new user account and configure their access permissions.</p>
                            </div>
                            
                            <div class="card" style="max-width: 600px; margin: 0 auto;">
                                <div class="card-body">
                                    <form id="addUserForm" onsubmit="app.handleAddUser(event)">
                                        <!-- User Information Section -->
                                        <div class="form-section">
                                            <h3 class="form-section-title">
                                                <span class="material-symbols-outlined">person</span>
                                                User Information
                                            </h3>
                                            
                                            <div class="form-grid">
                                                <div class="form-group">
                                                    <label for="firstName">First Name <span style="color: var(--m5-danger);">*</span></label>
                                                    <input type="text" id="firstName" name="firstName" class="form-control" required placeholder="Enter first name">
                                                </div>
                                                <div class="form-group">
                                                    <label for="lastName">Last Name <span style="color: var(--m5-danger);">*</span></label>
                                                    <input type="text" id="lastName" name="lastName" class="form-control" required placeholder="Enter last name">
                                                </div>
                                            </div>
                                            
                                            <div class="form-group">
                                                <label for="email">Email Address <span style="color: var(--m5-danger);">*</span></label>
                                                <input type="email" id="email" name="email" class="form-control" required placeholder="user@company.com">
                                            </div>
                                            
                                            <div class="form-group">
                                                <label for="role">User Role <span style="color: var(--m5-danger);">*</span></label>
                                                <select id="role" name="role" class="form-control" required>
                                                    <option value="">Select a role...</option>
                                                    <option value="client_standard_role">Client User</option>
                                                    <option value="client_admin_role">Client Admin</option>
                                                    <option value="staff_role">Staff User</option>
                                                    <option value="admin_role">Admin User</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <!-- Access Permissions Section -->
                                        <div class="form-section">
                                            <h3 class="form-section-title">
                                                <span class="material-symbols-outlined">security</span>
                                                Access Permissions
                                            </h3>
                                            <p class="form-section-subtitle">Select which areas of the portal this user can access.</p>
                                            
                                            <div class="permission-grid">
                                                <label class="permission-card">
                                                    <input type="checkbox" name="permissions" value="billing" id="perm-billing">
                                                    <div class="permission-content">
                                                        <div class="permission-icon">
                                                            <span class="material-symbols-outlined">receipt</span>
                                                        </div>
                                                        <div class="permission-info">
                                                            <h4>Billing & Invoices</h4>
                                                            <p>View invoices, payment history, and billing information</p>
                                                        </div>
                                                        <div class="permission-check">
                                                            <span class="material-symbols-outlined">check</span>
                                                        </div>
                                                    </div>
                                                </label>
                                                
                                                <label class="permission-card">
                                                    <input type="checkbox" name="permissions" value="files" id="perm-files">
                                                    <div class="permission-content">
                                                        <div class="permission-icon">
                                                            <span class="material-symbols-outlined">folder</span>
                                                        </div>
                                                        <div class="permission-info">
                                                            <h4>Files & Assets</h4>
                                                            <p>Upload, download, and manage project files and assets</p>
                                                        </div>
                                                        <div class="permission-check">
                                                            <span class="material-symbols-outlined">check</span>
                                                        </div>
                                                    </div>
                                                </label>
                                                
                                                <label class="permission-card">
                                                    <input type="checkbox" name="permissions" value="analytics" id="perm-analytics">
                                                    <div class="permission-content">
                                                        <div class="permission-icon">
                                                            <span class="material-symbols-outlined">analytics</span>
                                                        </div>
                                                        <div class="permission-info">
                                                            <h4>Analytics & Reports</h4>
                                                            <p>View campaign performance and analytics data</p>
                                                        </div>
                                                        <div class="permission-check">
                                                            <span class="material-symbols-outlined">check</span>
                                                        </div>
                                                    </div>
                                                </label>
                                                
                                                <label class="permission-card">
                                                    <input type="checkbox" name="permissions" value="campaigns" id="perm-campaigns">
                                                    <div class="permission-content">
                                                        <div class="permission-icon">
                                                            <span class="material-symbols-outlined">campaign</span>
                                                        </div>
                                                        <div class="permission-info">
                                                            <h4>Campaign Management</h4>
                                                            <p>View and manage marketing campaigns</p>
                                                        </div>
                                                        <div class="permission-check">
                                                            <span class="material-symbols-outlined">check</span>
                                                        </div>
                                                    </div>
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <!-- Form Actions -->
                                        <div class="form-actions">
                                            <button type="button" class="btn btn-secondary" onclick="app.navigate('dashboard')">
                                                Cancel
                                            </button>
                                            <button type="submit" class="btn btn-primary">
                                                <span class="material-symbols-outlined">person_add</span>
                                                Create User
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    `
                },
                
                '404': {
                    render: () => `
                        <div class="view">
                            <div class="text-center" style="padding: var(--space-3xl);">
                                <h1 class="page-title">Page Not Found</h1>
                                <p class="page-subtitle">The page you're looking for doesn't exist.</p>
                                <button class="btn btn-primary mt-4" onclick="app.navigate('dashboard')">
                                    Back to Dashboard
                                </button>
                            </div>
                        </div>
                    `
                }
            };
        }
        
        // Initialize the app when DOM is ready
        let app;
        document.addEventListener('DOMContentLoaded', () => {
            app = new PortalApp();
            window.app = app; // Make app globally accessible
        });
    </script>

    <!-- Widget Configuration Popup -->
    <div id="widgetConfigPopup" class="popup-overlay" style="display: none;">
        <div class="popup-container">
            <div class="popup-header">
                <h2>Configure Lead Magnet Widget</h2>
                <button class="btn-close" onclick="app.closeWidgetConfig()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="popup-body">
                <div class="roller-container">
                    <!-- Step Indicator -->
                    <div class="step-indicator">
                        <div class="step active" data-step="1">
                            <span class="step-number">1</span>
                            <span class="step-title">Widget Type</span>
                        </div>
                        <div class="step" data-step="2">
                            <span class="step-number">2</span>
                            <span class="step-title">Appearance</span>
                        </div>
                        <div class="step" data-step="3">
                            <span class="step-number">3</span>
                            <span class="step-title">Fields</span>
                        </div>
                        <div class="step" data-step="4">
                            <span class="step-number">4</span>
                            <span class="step-title">Integration</span>
                        </div>
                        <div class="step" data-step="5">
                            <span class="step-number">5</span>
                            <span class="step-title">Review</span>
                        </div>
                    </div>

                    <!-- Step Content -->
                    <div class="step-content">
                        <!-- Step 1: Widget Type -->
                        <div class="step-panel active" data-panel="1">
                            <h3>Select Widget Type</h3>
                            <div class="widget-type-grid">
                                <label class="widget-type-card">
                                    <input type="radio" name="widgetType" value="popup" checked>
                                    <div class="card-content">
                                        <span class="material-symbols-outlined">web_asset</span>
                                        <h4>Popup Form</h4>
                                        <p>Display form in a modal window</p>
                                    </div>
                                </label>
                                <label class="widget-type-card">
                                    <input type="radio" name="widgetType" value="slide-in">
                                    <div class="card-content">
                                        <span class="material-symbols-outlined">view_sidebar</span>
                                        <h4>Slide-in Panel</h4>
                                        <p>Slide from side of screen</p>
                                    </div>
                                </label>
                                <label class="widget-type-card">
                                    <input type="radio" name="widgetType" value="embedded">
                                    <div class="card-content">
                                        <span class="material-symbols-outlined">web</span>
                                        <h4>Embedded Form</h4>
                                        <p>Embed directly in page</p>
                                    </div>
                                </label>
                                <label class="widget-type-card">
                                    <input type="radio" name="widgetType" value="floating">
                                    <div class="card-content">
                                        <span class="material-symbols-outlined">bubble_chart</span>
                                        <h4>Floating Button</h4>
                                        <p>Fixed position button</p>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Step 2: Appearance -->
                        <div class="step-panel" data-panel="2">
                            <h3>Customize Appearance</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Primary Color</label>
                                    <input type="color" value="#9200C2" id="widgetPrimaryColor">
                                </div>
                                <div class="form-group">
                                    <label>Button Text</label>
                                    <input type="text" placeholder="Get Started" value="Get Started">
                                </div>
                                <div class="form-group">
                                    <label>Heading</label>
                                    <input type="text" placeholder="Schedule Your Property Tour" value="Schedule Your Property Tour">
                                </div>
                                <div class="form-group">
                                    <label>Subheading</label>
                                    <textarea placeholder="Enter your information below">Enter your information below and schedule your personalized property tour today</textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Fields -->
                        <div class="step-panel" data-panel="3">
                            <h3>Select Form Fields</h3>
                            <div class="field-selector">
                                <div class="field-item">
                                    <label>
                                        <input type="checkbox" checked disabled>
                                        <span>Name (Required)</span>
                                    </label>
                                </div>
                                <div class="field-item">
                                    <label>
                                        <input type="checkbox" checked disabled>
                                        <span>Email (Required)</span>
                                    </label>
                                </div>
                                <div class="field-item">
                                    <label>
                                        <input type="checkbox" checked>
                                        <span>Phone Number</span>
                                    </label>
                                </div>
                                <div class="field-item">
                                    <label>
                                        <input type="checkbox">
                                        <span>Company Name</span>
                                    </label>
                                </div>
                                <div class="field-item">
                                    <label>
                                        <input type="checkbox">
                                        <span>Message/Comments</span>
                                    </label>
                                </div>
                                <div class="field-item">
                                    <label>
                                        <input type="checkbox">
                                        <span>Budget Range</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Integration -->
                        <div class="step-panel" data-panel="4">
                            <h3>Integration Settings</h3>
                            <div class="form-group">
                                <label>Website Domain</label>
                                <input type="text" placeholder="https://example.com" value="">
                            </div>
                            <div class="form-group">
                                <label>Trigger Settings</label>
                                <select>
                                    <option>On Page Load (after 5 seconds)</option>
                                    <option>On Exit Intent</option>
                                    <option>On Scroll (50%)</option>
                                    <option>On Button Click</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked>
                                    <span>Send email notifications for new leads</span>
                                </label>
                            </div>
                        </div>

                        <!-- Step 5: Review -->
                        <div class="step-panel" data-panel="5">
                            <h3>Review & Get Code</h3>
                            <div class="review-summary">
                                <p><strong>Widget Type:</strong> <span id="reviewType">Popup Form</span></p>
                                <p><strong>Primary Color:</strong> <span id="reviewColor">#9200C2</span></p>
                                <p><strong>Fields:</strong> <span id="reviewFields">Name, Email, Phone</span></p>
                                <p><strong>Trigger:</strong> <span id="reviewTrigger">On Page Load</span></p>
                            </div>
                            <div class="code-section">
                                <h4>Installation Code</h4>
                                <p>Copy and paste this code before the closing &lt;/body&gt; tag on your website:</p>
                                <pre><code id="widgetCode">&lt;!-- Mach Five Lead Magnet Widget --&gt;
&lt;script src="https://portal.machfivemarketing.com/widget.js"&gt;&lt;/script&gt;
&lt;script&gt;
  MachFiveWidget.init({
    type: 'popup',
    primaryColor: '#9200C2',
    // Configuration will be here
  });
&lt;/script&gt;</code></pre>
                                <button class="btn btn-secondary" onclick="app.copyWidgetCode()">
                                    <span class="material-symbols-outlined">content_copy</span>
                                    Copy Code
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="step-navigation">
                        <button class="btn btn-secondary" id="prevStepBtn" onclick="app.previousStep()" style="display: none;">
                            <span class="material-symbols-outlined">arrow_back</span>
                            Previous
                        </button>
                        <button class="btn btn-primary" id="nextStepBtn" onclick="app.nextStep()">
                            Next
                            <span class="material-symbols-outlined">arrow_forward</span>
                        </button>
                        <button class="btn btn-primary" id="finishBtn" onclick="app.finishWidgetConfig()" style="display: none;">
                            <span class="material-symbols-outlined">check</span>
                            Finish Setup
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Deliverable Review Modal -->
    <div id="deliverableReviewModal" class="popup-overlay" style="display: none;">
        <div class="popup-container" style="max-width: 800px;">
            <div class="popup-header">
                <h2 id="deliverableTitle">Review Deliverable</h2>
                <button class="btn-close" onclick="app.closeDeliverableReview()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="popup-body">
                <div class="deliverable-preview" style="background: var(--m5-gray-100); padding: var(--space-lg); border-radius: var(--border-radius); margin-bottom: var(--space-lg); text-align: center; min-height: 300px; display: flex; align-items: center; justify-content: center;">
                    <div id="deliverablePreview">
                        <!-- Preview content will be inserted here -->
                    </div>
                </div>
                
                <div class="deliverable-details" style="margin-bottom: var(--space-lg);">
                    <div class="grid grid-cols-2" style="gap: var(--space-md);">
                        <div>
                            <p class="text-small text-muted">Type</p>
                            <p id="deliverableType">--</p>
                        </div>
                        <div>
                            <p class="text-small text-muted">Submitted</p>
                            <p id="deliverableDate">--</p>
                        </div>
                        <div>
                            <p class="text-small text-muted">Created By</p>
                            <p>Sarah Martinez</p>
                        </div>
                        <div>
                            <p class="text-small text-muted">Version</p>
                            <p>v1.0</p>
                        </div>
                    </div>
                </div>
                
                <div class="feedback-section">
                    <h3 style="margin-bottom: var(--space-md);">Feedback</h3>
                    <textarea id="feedbackText" placeholder="Provide feedback or request changes..." style="width: 100%; min-height: 100px; padding: var(--space-sm); border: 1px solid var(--m5-gray-300); border-radius: var(--border-radius); resize: vertical;"></textarea>
                </div>
                
                <div class="approval-actions" style="display: flex; gap: var(--space-md); margin-top: var(--space-lg);">
                    <button class="btn btn-success" style="flex: 1;" onclick="app.approveDeliverable()">
                        <span class="material-symbols-outlined">check_circle</span>
                        Approve
                    </button>
                    <button class="btn btn-warning" style="flex: 1;" onclick="app.requestChanges()">
                        <span class="material-symbols-outlined">edit_note</span>
                        Request Changes
                    </button>
                    <button class="btn btn-secondary" style="flex: 1;" onclick="app.closeDeliverableReview()">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Configuration Modal -->
    <div id="configurationModal" class="popup-overlay" style="display: none;">
        <div class="popup-container">
            <div class="popup-header">
                <h2>Marketing Configuration Settings</h2>
                <button class="btn-close" onclick="window.app.closeConfigurationModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="popup-body">
                <div class="configuration-content">
                    <p class="text-muted mb-4">These settings were configured during your onboarding process. Update them as needed to ensure accurate tracking and integration.</p>
                    
                    <!-- Website Information Section -->
                    <div class="config-section">
                        <h3 class="config-section-title">
                            <span class="material-symbols-outlined">language</span>
                            Website Information
                        </h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Primary Domain</label>
                                <input type="text" id="configDomain" value="acmerentals.com" placeholder="https://example.com">
                            </div>
                            <div class="form-group">
                                <label>Additional Domains</label>
                                <textarea id="configAdditionalDomains" placeholder="One domain per line">blog.acmerentals.com
properties.acmerentals.com
apply.acmerentals.com</textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Analytics Section -->
                    <div class="config-section">
                        <h3 class="config-section-title">
                            <span class="material-symbols-outlined">analytics</span>
                            Analytics & Tracking
                        </h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Google Analytics 4 (GA4) Measurement ID</label>
                                <input type="text" id="configGA4" value="G-A7K9P2L4M8" placeholder="G-XXXXXXXXXX">
                            </div>
                            <div class="form-group">
                                <label>Google Tag Manager Container ID</label>
                                <input type="text" id="configGTM" value="GTM-MX8K9PL" placeholder="GTM-XXXXXXX">
                            </div>
                            <div class="form-group">
                                <label>Facebook Pixel ID</label>
                                <input type="text" id="configFBPixel" value="847291650328476" placeholder="############">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advertising Accounts Section -->
                    <div class="config-section">
                        <h3 class="config-section-title">
                            <span class="material-symbols-outlined">ads_click</span>
                            Advertising Accounts
                        </h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Google Ads Account ID</label>
                                <input type="text" id="configGoogleAds" value="123-456-7890" placeholder="XXX-XXX-XXXX">
                            </div>
                            <div class="form-group">
                                <label>Meta Business Manager ID</label>
                                <input type="text" id="configMetaBusiness" value="3847562910284756" placeholder="################">
                            </div>
                            <div class="form-group">
                                <label>Meta Ad Account ID</label>
                                <input type="text" id="configMetaAds" value="act_2847561920384" placeholder="act_############">
                            </div>
                        </div>
                    </div>
                    
                    <!-- API Integrations Section -->
                    <div class="config-section">
                        <h3 class="config-section-title">
                            <span class="material-symbols-outlined">webhook</span>
                            API Integrations
                        </h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>CRM Webhook URL</label>
                                <input type="text" id="configCRMWebhook" value="https://hooks.zapier.com/hooks/catch/2847561/bqo7kx9/" placeholder="https://...">
                            </div>
                            <div class="form-group">
                                <label>Lead Notification Email</label>
                                <input type="email" id="configNotificationEmail" value="jay@acmerentals.com" placeholder="email@example.com">
                            </div>
                            <div class="form-group">
                                <label>API Key (Auto-generated)</label>
                                <div style="display: flex; gap: var(--space-sm);">
                                    <input type="text" id="configAPIKey" value="pk_live_51N8kP2L4m8A7k9p2L4m8A7k9" readonly style="flex: 1;">
                                    <button class="btn btn-secondary btn-sm" onclick="app.regenerateAPIKey()">
                                        <span class="material-symbols-outlined">refresh</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Business Information Section -->
                    <div class="config-section">
                        <h3 class="config-section-title">
                            <span class="material-symbols-outlined">business</span>
                            Business Information
                        </h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Business Name</label>
                                <input type="text" id="configBusinessName" value="ACME Rentals LLC" placeholder="Your Business Name">
                            </div>
                            <div class="form-group">
                                <label>Industry</label>
                                <select id="configIndustry">
                                    <option value="real-estate" selected>Real Estate</option>
                                    <option value="ecommerce">E-commerce</option>
                                    <option value="saas">SaaS</option>
                                    <option value="professional-services">Professional Services</option>
                                    <option value="healthcare">Healthcare</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Target Markets</label>
                                <input type="text" id="configMarkets" value="Residential Real Estate, Investment Properties, Luxury Homes" placeholder="Comma-separated list">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Actions -->
                    <div class="config-actions">
                        <button class="btn btn-secondary" onclick="app.testConfiguration()">
                            <span class="material-symbols-outlined">science</span>
                            Test Configuration
                        </button>
                        <div style="flex: 1;"></div>
                        <button class="btn btn-ghost" onclick="window.app.closeConfigurationModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="window.app.saveConfiguration()">
                            <span class="material-symbols-outlined">save</span>
                            Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- File Upload Modal -->
    <div id="uploadModal" class="popup-overlay" style="display: none;">
        <div class="popup-container">
            <div class="popup-header">
                <h2>Upload Files</h2>
                <button class="btn-close" onclick="app.closeUploadModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="popup-body">
                <div class="upload-dropzone" id="uploadDropzone" onclick="document.getElementById('fileUploadInput').click()">
                    <span class="material-symbols-outlined upload-icon">cloud_upload</span>
                    <h3 class="upload-title">Drop files here or click to browse</h3>
                    <p class="upload-subtitle">Maximum file size: 100MB per file</p>
                    <button class="btn btn-primary upload-button">
                        <span class="material-symbols-outlined">upload_file</span>
                        Browse Files
                    </button>
                    <input type="file" id="fileUploadInput" class="upload-input" multiple onchange="app.handleFileSelect(event)">
                </div>
                
                <div id="uploadFileList" class="upload-file-list" style="display: none;">
                    <!-- Selected files will appear here -->
                </div>
                
                <div class="upload-destination">
                    <h3 class="destination-title">Select Destination Folder</h3>
                    <div class="folder-tree">
                        <div class="folder-item selected" data-folder="/" onclick="app.selectFolder(this, '/')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Root</span>
                        </div>
                        <div class="folder-item nested" data-folder="/campaign-assets" onclick="app.selectFolder(this, '/campaign-assets')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Campaign Assets</span>
                        </div>
                        <div class="folder-item nested-2" data-folder="/campaign-assets/summer-2024" onclick="app.selectFolder(this, '/campaign-assets/summer-2024')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Summer 2024</span>
                        </div>
                        <div class="folder-item nested-2" data-folder="/campaign-assets/fall-2024" onclick="app.selectFolder(this, '/campaign-assets/fall-2024')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Fall 2024</span>
                        </div>
                        <div class="folder-item nested" data-folder="/brand-guidelines" onclick="app.selectFolder(this, '/brand-guidelines')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Brand Guidelines</span>
                        </div>
                        <div class="folder-item nested" data-folder="/social-media" onclick="app.selectFolder(this, '/social-media')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Social Media</span>
                        </div>
                        <div class="folder-item nested-2" data-folder="/social-media/instagram" onclick="app.selectFolder(this, '/social-media/instagram')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Instagram</span>
                        </div>
                        <div class="folder-item nested-2" data-folder="/social-media/facebook" onclick="app.selectFolder(this, '/social-media/facebook')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Facebook</span>
                        </div>
                        <div class="folder-item nested" data-folder="/reports" onclick="app.selectFolder(this, '/reports')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Reports</span>
                        </div>
                        <div class="folder-item nested" data-folder="/contracts" onclick="app.selectFolder(this, '/contracts')">
                            <span class="material-symbols-outlined folder-icon">folder</span>
                            <span class="folder-name">Contracts & Agreements</span>
                        </div>
                    </div>
                </div>
                
                <div class="upload-actions">
                    <div class="upload-summary">
                        <span id="uploadFileCount">0</span> files selected  
                        <span id="uploadTotalSize">0 MB</span>  
                        Destination: <strong id="uploadDestination">/Root</strong>
                    </div>
                    <div style="flex: 1;"></div>
                    <button class="btn btn-secondary" onclick="app.closeUploadModal()">Cancel</button>
                    <button class="btn btn-primary" id="uploadButton" onclick="app.startUpload()" disabled>
                        <span class="material-symbols-outlined">upload</span>
                        Upload Files
                    </button>
                </div>
                
                <div class="upload-progress" id="uploadProgress" style="display: none;">
                    <div class="upload-progress-bar" id="uploadProgressBar" style="width: 0%;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div id="messageModal" class="modal-overlay" style="display: none;" onclick="if(event.target === this) app.closeMessageModal()">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Send Message to Account Manager</h2>
                <button class="modal-close" onclick="app.closeMessageModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="messageSubject">Subject</label>
                    <input type="text" id="messageSubject" class="form-control" placeholder="What's this about?">
                </div>
                <div class="form-group">
                    <label for="messageContent">Message</label>
                    <textarea id="messageContent" class="form-control" rows="6" placeholder="Type your message here..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="app.closeMessageModal()">Cancel</button>
                <button class="btn btn-primary" onclick="app.sendMessage()">
                    <span class="material-symbols-outlined">send</span>
                    Send Message
                </button>
            </div>
        </div>
    </div>

    <!-- Support Ticket Modal -->
    <div id="ticketModal" class="modal-overlay" style="display: none;" onclick="if(event.target === this) app.closeTicketModal()">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Create Support Ticket</h2>
                <button class="modal-close" onclick="app.closeTicketModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="ticketSubject">Subject <span style="color: var(--m5-danger);">*</span></label>
                    <input type="text" id="ticketSubject" class="form-control" placeholder="Brief description of the issue">
                </div>
                <div class="form-group">
                    <label for="ticketCategory">Category <span style="color: var(--m5-danger);">*</span></label>
                    <select id="ticketCategory" class="form-control">
                        <option value="">Select a category...</option>
                        <option value="login">Login/Access Issues</option>
                        <option value="files">File Upload/Download</option>
                        <option value="leadmagnet">Lead Magnet Widget</option>
                        <option value="integration">Integration Problems</option>
                        <option value="performance">Performance Issues</option>
                        <option value="bug">Bug Report</option>
                        <option value="other">Other Technical Issue</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ticketPriority">Priority</label>
                    <select id="ticketPriority" class="form-control">
                        <option value="low">Low - Can wait a few days</option>
                        <option value="medium" selected>Medium - Affecting work but not critical</option>
                        <option value="high">High - Blocking important work</option>
                        <option value="urgent">Urgent - Complete system outage</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ticketDescription">Description <span style="color: var(--m5-danger);">*</span></label>
                    <textarea id="ticketDescription" class="form-control" rows="6" placeholder="Please describe the issue in detail. Include:
 What you were trying to do
 What happened instead
 Any error messages you saw
 Steps to reproduce the issue"></textarea>
                </div>
                <div style="background: var(--m5-gray-50); padding: var(--space-md); border-radius: var(--border-radius); margin-top: var(--space-lg);">
                    <p class="text-small text-muted" style="margin: 0;">
                        <strong>Note:</strong> For general questions about your marketing program, campaign strategy, or account changes, please contact your Account Manager instead. This form is specifically for technical issues with the portal.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="app.closeTicketModal()">Cancel</button>
                <button class="btn btn-primary" onclick="app.submitTicket()">
                    <span class="material-symbols-outlined">confirmation_number</span>
                    Submit Ticket
                </button>
            </div>
        </div>
    </div>

    <script>
        // Lead magnet removed as requested
    </script>

</body>
</html>